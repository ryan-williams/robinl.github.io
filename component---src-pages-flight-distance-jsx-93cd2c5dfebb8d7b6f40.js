(self.webpackChunkgatsby_starter_hello_world=self.webpackChunkgatsby_starter_hello_world||[]).push([[950],{2465:function(e,t,n){"use strict";function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{Z:function(){return a}})},2263:function(e,t,n){"use strict";n(7294);var a=n(835),r=n(8847),o=n(7414),i=n(6140),l=n(674);t.Z=function(e){var t;return t=e.define?(0,l.tZ)(r.Z,{define:e.define,output_order:e.output_order}):e.children,(0,l.tZ)(a.Z,{css:e.className},(0,l.tZ)(i.Z,{title:e.post_frontmatter.title,description:e.post_frontmatter.description}),(0,l.tZ)(o.Z,{post_frontmatter:e.post_frontmatter}),t)}},6918:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return yt},frontmatter:function(){return vt}});n(7294);var a,r,o,i,l,s,u,c,d,f,p,m,h,b,v,g,y,_,w,k,Z,x,M,S,T,j,C,O,A,P,I,F,E,N,D,q,L,B,H,z,G,J,W,Y,$=n(2137),Q=n(8481),R=n(2465),V=n(7757),K=n.n(V);function U(e){return e(a||(a=(0,R.Z)(["# Flights globe chart function"])))}function X(e,t,n,a,r,o,i,l,s){return function(u){var c=e.context2d(t,n),d=a.geoPath(r,c),f=a.scaleSequential(a.interpolateOrRd).domain(a.extent(u,(function(e){return e.distance})));function p(){c.clearRect(0,0,t,n),c.beginPath(),d(o),c.fillStyle="#fff",c.fill(),c.beginPath(),d(i),c.fillStyle="#000",c.fill(),c.beginPath(),d(o),c.stroke(),u.forEach((function(e){var t=[[e.lng_from,e.lat_from],[e.lng_to,e.lat_to]],n=l(t),a=[n.after[1][0]+(e.lat_from+e.lng_to)/100,n.after[1][1]+(e.lat_from+e.lng_to)/100];n.after[1]=a;var r={type:"LineString",coordinates:n.after};c.lineWidth=1.5,c.lineO,c.beginPath(),d(r),c.strokeStyle=f(e.distance),c.stroke()})),c.lineWidth=1,c.strokeStyle="#000000"}return a.select(c.canvas).call(s(r).on("drag.render",p)).call(p).node()}}function ee(e){return e(r||(r=(0,R.Z)(["Imports"])))}function te(e){return e("d3@5")}function ne(e){return e("topojson-client@3")}function ae(e){return e.json("https://unpkg.com/world-atlas@1/world/110m.json")}function re(e,t){return e.feature(t,t.objects.land)}function oe(e,t){return function(n){var a,r,o;return t.drag().on("start",(function(){a=e.cartesian(n.invert(t.mouse(this))),r=e(o=n.rotate())})).on("drag",(function(){var i=e.cartesian(n.rotate(o).invert(t.mouse(this))),l=e.multiply(r,e.delta(a,i));n.rotate(e.rotation(l))}))}}function ie(e){return.6*e}function le(e,t,n,a){return e.geoEqualEarth().fitExtent([[1,1],[t-1,n-1]],a).translate([t/2,n/2]).rotate([0,0]).precision(.1)}function se(){return{type:"Sphere"}}function ue(e,t){return function(n){for(var a=0,r=n.length,o=[],i=[];++a<r;){var l=n[a-1].slice(),s=n[a].slice(),u=e(l),c=e(s),d=c[0]-u[0],f=c[1]-u[1],p=d*d+f*f;if(o.push(l),i.push(l),p>.4){var m=t.geoInterpolate(l,s)(.5),h=e(m),b=h[0]-u[0],v=h[1]-u[1],g=f*b-d*v;if(g*g/p>.1){var y=(b*d+v*f)/p;o.push(e.invert(m.resampled=[u[0]+y*d,u[1]+y*f])),i.push(m)}}}return r&&(o.push(s),i.push(s)),{before:o,after:i}}}function ce(e){return e("versor@0.0.3")}function de(e,t){var n=e.module();return n.variable(t()).define(["md"],U),n.variable(t("chart")).define("chart",["DOM","width","height","d3","projection","sphere","land","resample","drag"],X),n.variable(t()).define(["md"],ee),n.variable(t("d3")).define("d3",["require"],te),n.variable(t("topojson")).define("topojson",["require"],ne),n.variable(t("world")).define("world",["d3"],ae),n.variable(t("land")).define("land",["topojson","world"],re),n.variable(t("drag")).define("drag",["versor","d3"],oe),n.variable(t("height")).define("height",["width"],ie),n.variable(t("projection")).define("projection",["d3","width","height","sphere"],le),n.variable(t("sphere")).define("sphere",se),n.variable(t("resample")).define("resample",["projection","d3"],ue),n.variable(t("versor")).define("versor",["require"],ce),n}function fe(e,t){return e(o||(o=(0,R.Z)(["# Tables\n\n_This notebook is ready for public input - hit me up at @tmcw on [the forum](https://talk.observablehq.com/t/it-would-be-cool-if-table-tags-had-a-spiffy-default-style/588/4), twitter, or elsewhere to give input. You can use it, but the API is likely to change soon, so use this exact version:_\n\n```js\nimport {table} from \"@tmcw/tables@513\"\n```\n\nGood tables are good. Making a good table relies on good defaults, good options, and lots of nitpicky finishing touches. This is a notebook that tries to provide a good starting point for table defaults, a fast drop-in read-only data table for data analysis.\n\n### Table API:\n\n- **data** `Array<Object>`: with consistent data types across rows\n- **options**:\n  - **style**: `enum(normal, compact)`: a string value of a default style. By default, tables are designed for comfortable reading with large fonts. To display more information in less screen space, use compact.\n  - **header** `boolean` (default true): set to false to entirely omit the table header.\n  - **sortable** `boolean` (default false): make columns sortable\n  - **paged** `number` (default 25): split data by pages, if it has more than the given number of items.\n  - **rank** `boolean` (default false): show 1… rank numbers in the first column. Cannot be combined with sortable.\n  - **columns** `Object`: column-specific configuration, indexed by key:\n    - `[key]`\n      - **formatter** `Function(value, rowIndex, row) ⇒ output`: value formatter for cells. This can return a string, number, or element. If it returns a `<td>` element, that element can ‘take over’ the cell.\n      - **title** `string`: alternate text for table header - by default, the header cell is named after the key in the data object\n      - **type** `string`: override auto-detected type for this column - display numbers as strings, etc. Optional, should be one of 'string' or 'number'.\n\nAn example of a dataset that table() easily accepts:\n\n```json\n","\n```\n"],["# Tables\n\n_This notebook is ready for public input - hit me up at @tmcw on [the forum](https://talk.observablehq.com/t/it-would-be-cool-if-table-tags-had-a-spiffy-default-style/588/4), twitter, or elsewhere to give input. You can use it, but the API is likely to change soon, so use this exact version:_\n\n\\`\\`\\`js\nimport {table} from \"@tmcw/tables@513\"\n\\`\\`\\`\n\nGood tables are good. Making a good table relies on good defaults, good options, and lots of nitpicky finishing touches. This is a notebook that tries to provide a good starting point for table defaults, a fast drop-in read-only data table for data analysis.\n\n### Table API:\n\n- **data** \\`Array<Object>\\`: with consistent data types across rows\n- **options**:\n  - **style**: \\`enum(normal, compact)\\`: a string value of a default style. By default, tables are designed for comfortable reading with large fonts. To display more information in less screen space, use compact.\n  - **header** \\`boolean\\` (default true): set to false to entirely omit the table header.\n  - **sortable** \\`boolean\\` (default false): make columns sortable\n  - **paged** \\`number\\` (default 25): split data by pages, if it has more than the given number of items.\n  - **rank** \\`boolean\\` (default false): show 1… rank numbers in the first column. Cannot be combined with sortable.\n  - **columns** \\`Object\\`: column-specific configuration, indexed by key:\n    - \\`[key]\\`\n      - **formatter** \\`Function(value, rowIndex, row) ⇒ output\\`: value formatter for cells. This can return a string, number, or element. If it returns a \\`<td>\\` element, that element can ‘take over’ the cell.\n      - **title** \\`string\\`: alternate text for table header - by default, the header cell is named after the key in the data object\n      - **type** \\`string\\`: override auto-detected type for this column - display numbers as strings, etc. Optional, should be one of 'string' or 'number'.\n\nAn example of a dataset that table() easily accepts:\n\n\\`\\`\\`json\n","\n\\`\\`\\`\n"])),JSON.stringify(t.slice(0,2),null,2))}function pe(e){return e(i||(i=(0,R.Z)(["\n<br /><br />\n\n*Click the caret on the left to view code for any example.*\n\n\n### Titanic survivors\n\nThis is a table of the Titanic survivors dataset - it shows the data in natural order, first, but the columns are sortable. It shows usage of custom formatters for the Name and Fare columns. The Fare column formatter uses the rowIndex to determine the appropriate format based on the row number. (i.e. $ for the first row only)."])))}function me(e,t,n,a){return e(t,{sortable:!0,columns:{Fare:{formatter:function(e,t){return 0===t?n.format("$.2f")(e):n.format(".2f")(e)}},Name:{formatter:function(e){var t=e.match(/([^,]*)\,(.*)/);return a(l||(l=(0,R.Z)(["<strong>","</strong>, ",""])),t[1],t[2])}}}})}function he(e){return e(s||(s=(0,R.Z)(["<br /><br />\n\n### Spotify top charts\n\nThis is a table of the top-streamed tracks from [Spotify](https://spotifycharts.com/regional) today. It shows usage of a custom formatter, as well as the `rank` option to add an unlabeled rank column. This also sets the `style` to compact because we’re displaying a bunch of rows."],["<br /><br />\n\n### Spotify top charts\n\nThis is a table of the top-streamed tracks from [Spotify](https://spotifycharts.com/regional) today. It shows usage of a custom formatter, as well as the \\`rank\\` option to add an unlabeled rank column. This also sets the \\`style\\` to compact because we’re displaying a bunch of rows."])))}function be(e,t,n,a){return e(t,{rank:!0,style:"compact",columns:{Track:{formatter:function(e,t){return n(u||(u=(0,R.Z)(["<strong>","</strong> by ",""])),e[0],e[1])}},Streams:{formatter:a.format(",")}}})}function ve(e,t,n,a){return function(r,o){var i=o=Object.assign({},e,o),l=i.sortable,s=i.rank,u=i.paged,g=void 0,y=!0,_=0;if(l&&s)throw new Error("A table can either be ranked or sortable, but not both");var w=Object.keys(r[0]).map((function(e){var t=o.columns[e]||{};return{key:e,type:t.type||typeof r[0][e],options:t}}));function k(){g&&(r=r.slice().sort((function(e,t){var n=e[g],a=t[g];if(n==a)return JSON.stringify(e).localeCompare(JSON.stringify(t));var r=n>a?1:n<a?-1:0;return y&&(r=-r),r})));var e=r.slice(_*u,_*u+u),i=Math.ceil(r.length/u);return t(c||(c=(0,R.Z)(["<div><div>\n      <style>\n.pretty-pager {\n  padding-top: 1rem;\n}\n.pretty-pager button {\n  cursor: pointer;\n  border-radius: 3px;\n  border: 1px solid #fff;\n  font-size: inherit;\n}\n.pretty-pager button:hover {\n  border: 1px solid #888;\n}\n.pretty-table.normal {\n  font-size: 15px;\n}\n.pretty-table.normal th,\n.pretty-table.normal td {\n  padding: 3px 2px;\n}\n.pretty-table th,\n.pretty-table td {\n  vertical-align: top;\n}\n.pretty-table thead th {\n  text-transform: uppercase;\n  font-weight:500;\n}\n.pretty-table thead th.column-type-number string {\n  order: 1;\n}\n.pretty-table th.sortable {\n  cursor: pointer;\n}\n.pretty-table thead th.column-type-number,\n.pretty-table tbody td.cell-type-number,\n.pretty-table tbody td.cell-rank {\n  text-align:right;\n}\n.pretty-table tbody td.cell-type-number,\n.pretty-table tbody td.cell-rank {\n  font-family: menlo,consolas,monaco,monospace;\n  font-size: 90%;\n}\n.pretty-table tbody td.cell-rank {\n  padding-right: 1em;\n  color: #666;\n}\n\n</style>\n        <table class='pretty-table ","'>\n          ","\n          <tbody>\n            ","\n          </tbody>\n        </table>\n        ","\n      </div></div>"])),o.style,!1===o.header?"":t(d||(d=(0,R.Z)(["<thead>\n            ","\n            ","\n          </thead>"])),s?t(f||(f=(0,R.Z)(["<th></th>"]))):"",w.map((function(e){return n(e,g,y,l)}))),e.map((function(e,n){return t(p||(p=(0,R.Z)(["<tr>\n              ","\n              ","\n            </tr>"])),s?t(m||(m=(0,R.Z)(["<td class='cell-rank'>","</td>"])),n+1):"",w.map((function(r){var o=(r.options.formatter||a)(e[r.key],n,e);return o instanceof window.HTMLElement&&"TD"==o.tagName?o:t(h||(h=(0,R.Z)(["<td class='cell-type-","'>","</td>"])),r.type,o)})))})),i?t(b||(b=(0,R.Z)(["<div class='pretty-pager'>\n          <button data-action=\"next\">Previous</button>\n          ",'\n          <button data-action="previous">Next</button>\n        </div>'])),Array.from({length:i}).map((function(e,n){return t(v||(v=(0,R.Z)(['<button data-page="','">',"</button>"])),n+1,n+1)}))):"")}var Z=k();function x(){Z.firstChild.remove(),Z.appendChild(k().firstChild)}return Z.addEventListener("click",(function(e){if("TH"===e.target.tagName&&l&&(g==e.target.dataset.key&&(y=!y),g=e.target.dataset.key,x()),"BUTTON"===e.target.tagName)if(e.target.dataset.action)switch(e.target.dataset.action){case"next":_++,x();break;case"previous":_--,x()}else e.target.dataset.page&&(_=parseInt(e.target.dataset.page),x())})),Z}}function ge(e){return e(g||(g=(0,R.Z)(["<br /><br />\n\n### Kenya data\n\nDemonstration of [data from Quartz Atlas](https://www.theatlas.com/charts/BJGldhdsG): demonstrates usage of the _type_ override, a custom formatter, and overriding titles."])))}function ye(e,t,n,a){return e(t,{columns:{method:{title:""},percent:{title:"Method of transfer (2006)",type:"string",formatter:function(e,t){return n(y||(y=(0,R.Z)(["<div style='display:flex;align-items:center;height:1.5em;'>\n          <div style='width:","%;height:1em;background:#5f27cd;margin-right:0.5em;'></div>","\n        </div>"])),e,0==t?a.format(".0%")(e/100):e)}}}})}function _e(e){return e(_||(_=(0,R.Z)(["<br /><br />\n\n### Heat-tables\n\nA tribute to the [538](https://fivethirtyeight.com/features/the-year-in-trumps-approval-rating/) table style for opinion polls. Demonstrates that if a cell formatter returns a `<td>` element, it can take over the entire cell to do things like setting background colors.\n\nThis also demonstrates using a table with viewof: click a name to view the person below.\n"],["<br /><br />\n\n### Heat-tables\n\nA tribute to the [538](https://fivethirtyeight.com/features/the-year-in-trumps-approval-rating/) table style for opinion polls. Demonstrates that if a cell formatter returns a \\`<td>\\` element, it can take over the entire cell to do things like setting background colors.\n\nThis also demonstrates using a table with viewof: click a name to view the person below.\n"])))}function we(e,t,n,a){var r=e(t,{columns:{name:{formatter:function(e,t,a){var o=n(w||(w=(0,R.Z)(["<a style='cursor:pointer'>","</a>"])),e);return o.addEventListener("click",(function(){r.value=a,r.dispatchEvent(new CustomEvent("input"))})),o}},elected:{type:"string"},approval:{formatter:function(e,t){var r=a.scaleLinear().domain([-2,0,2]).range(["#f4c8cf","#f8f8f8","#c8f4cb"]);return n(k||(k=(0,R.Z)(["<td style='background:",";text-align:right;padding:2px 5px;'>","</td>"])),r(e),e)}}}});return r}function ke(e,t){return e&&t(Z||(Z=(0,R.Z)(["## ","\n\nI was elected "," and have an approval rating of ","."])),e.name,e.elected,e.approval)}function Ze(e){return function(t,n,a,r){var o=t.options.title,i=n&&a?"↑":"↓",l=e(x||(x=(0,R.Z)(["<span style='","'>","</span>"])),n===t.key?"":"visibility:hidden",i),s=void 0!==o?o:t.key;return"number"===t.type?e(M||(M=(0,R.Z)(['<th\n      data-key="',"\"\n      class='column-type-"," ","'>\n        ","","\n    </th>"])),t.key,t.type,r?"sortable":"",l,s):e(S||(S=(0,R.Z)(['<th\n      data-key="',"\"\n      class='column-type-"," ","'>\n        ","","\n    </th>"])),t.key,t.type,r?"sortable":"",s,l)}}function xe(){return"\n\n"}function Me(e){return e(T||(T=(0,R.Z)(["Here's [my are.na collection](https://www.are.na/tom-macwright/good-looking-tables) of inspirations. My key observations:\n\n- ✔ Numeric columns should really have monospaced numbers: it’s important for numbers to line up\n- ✔ Most data tables use title-case, bold or semibold headers\n\nNecessary perks:\n\n- Good support for N/A values\n- code-based reordering for columns\n\nStretch goals:\n\n- ✔️ Sorting\n- Selecting of rows\n\nI don’t see any of the following in the wild:\n\n- Vertical borders\n- Alternate row coloring"])))}function Se(){return{columns:{},style:"normal",paged:25}}function Te(){return function(e){return e}}function je(e){return e(j||(j=(0,R.Z)(["Helpers (not used in export path)"])))}function Ce(e){return e("d3@5")}function Oe(e){return e(C||(C=(0,R.Z)(["Datasets"])))}function Ae(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,$.Z)(K().mark((function e(t,n){return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,n("regional-global-daily-latest@2.csv").url();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.csv.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return e.map((function(e){return{Track:[e["Track Name"],e.Artist],Streams:+e.Streams}}))}function Fe(){return[{method:"Hand",percent:58},{method:"Bus",percent:27},{method:"Post office, money order",percent:24},{method:"Direct deposit",percent:11},{method:"Money transfer services",percent:9},{method:"Cheque",percent:4},{method:"Someone else's account",percent:3}]}function Ee(){return["Barney","Homer","Bart","Lisa","Marge"].map((function(e,t){return{name:e,elected:1990+5*t,approval:t-2}}))}function Ne(e){return e.csvParse('PassengerId,Survived,Pclass,Name,Sex,Age,SibSp,Parch,Ticket,Fare,Cabin,Embarked\n1,0,3,"Braund, Mr. Owen Harris",male,22,1,0,A/5 21171,7.25,,S\n2,1,1,"Cumings, Mrs. John Bradley (Florence Briggs Thayer)",female,38,1,0,PC 17599,71.2833,C85,C\n3,1,3,"Heikkinen, Miss. Laina",female,26,0,0,STON/O2. 3101282,7.925,,S\n4,1,1,"Futrelle, Mrs. Jacques Heath (Lily May Peel)",female,35,1,0,113803,53.1,C123,S\n5,0,3,"Allen, Mr. William Henry",male,35,0,0,373450,8.05,,S\n6,0,3,"Moran, Mr. James",male,,0,0,330877,8.4583,,Q\n7,0,1,"McCarthy, Mr. Timothy J",male,54,0,0,17463,51.8625,E46,S\n8,0,3,"Palsson, Master. Gosta Leonard",male,2,3,1,349909,21.075,,S').map((function(e){var t=e.Age;return{Name:e.Name,Age:+t,Fare:+e.Fare}}))}function De(e,t){var n=e.module();return n.variable(t()).define(["md","opinionPolls"],fe),n.variable(t()).define(["md"],pe),n.variable(t()).define(["table","titanicData","d3","html"],me),n.variable(t()).define(["md"],he),n.variable(t()).define(["table","spotify","html","d3"],be),n.variable(t("table")).define("table",["defaultOptions","html","th","identity"],ve),n.variable(t()).define(["md"],ge),n.variable(t()).define(["table","kenyaData","html","d3"],ye),n.variable(t()).define(["md"],_e),n.variable(t("viewof name")).define("viewof name",["table","opinionPolls","html","d3"],we),n.variable(t("name")).define("name",["Generators","viewof name"],(function(e,t){return e.input(t)})),n.variable(t()).define(["name","md"],ke),n.variable(t("th")).define("th",["html"],Ze),n.variable(t("style")).define("style",xe),n.variable(t()).define(["md"],Me),n.variable(t("defaultOptions")).define("defaultOptions",Se),n.variable(t("identity")).define("identity",Te),n.variable(t()).define(["md"],je),n.variable(t("d3")).define("d3",["require"],Ce),n.variable(t()).define(["md"],Oe),n.variable(t("spotifyCharts")).define("spotifyCharts",["d3","FileAttachment"],Ae),n.variable(t("spotify")).define("spotify",["spotifyCharts"],Ie),n.variable(t("kenyaData")).define("kenyaData",Fe),n.variable(t("opinionPolls")).define("opinionPolls",Ee),n.variable(t("titanicData")).define("titanicData",["d3"],Ne),n}function qe(e){return e(O||(O=(0,R.Z)(["# Flight distance calculator"])))}function Le(e){return e(A||(A=(0,R.Z)(["*A final version of this notebook can be viewed on my blog [here](https://www.robinlinacre.com/flight_distance/).*"])))}function Be(e,t,n){var a=e(P||(P=(0,R.Z)(['\n\n         <input name="dep" type="text" autocomplete="off" \n          placeholder="Choose departure airport" style="font-size: 1em;" list=options>\n          <datalist id="options">\n              ',"\n          </datalist>"])),t.map((function(t){return Object.assign(e(I||(I=(0,R.Z)(["<option>"]))),{value:t})}))),r=e(F||(F=(0,R.Z)(['<input name="arr" type="text" autocomplete="off" \n          placeholder="Choose arrival airport" style="font-size: 1em;" list=options>\n          <datalist id="options">\n              ',"\n          </datalist>"])),t.map((function(t){return Object.assign(e(E||(E=(0,R.Z)(["<option>"]))),{value:t})}))),o=e(N||(N=(0,R.Z)(['<input type="button" value="Add flight">']))),i=e(D||(D=(0,R.Z)(['<input type="button" value="Clear all flights">']))),l=e(q||(q=(0,R.Z)(['<input type="button" value="Clear current inputs">']))),s=e(L||(L=(0,R.Z)(['<input type="button" value="Switch departure and arrival airports">']))),u=e(B||(B=(0,R.Z)(["<p>"," ","<br/>","","","","</p>"])),a,r,o,i,l,s);return o.onclick=function(){var e=a.children[0].value,t=r.children[0].value;if(""==e||""==t)throw"Must select both a departure and arrival airport";u.value.push([n(e),n(t)]),u.dispatchEvent(new CustomEvent("input"))},l.onclick=function(){a.children[0].value="",r.children[0].value=""},s.onclick=function(){var e=a.children[0].value;a.children[0].value=r.children[0].value,r.children[0].value=e},i.onclick=function(){u.value=[],a.children[0].value="",r.children[0].value="",u.dispatchEvent(new CustomEvent("input"))},u.value=[],u}function He(e,t){return e.map((function(e){return[t.get(e[0]),t.get(e[1])]}))}function ze(e,t,n){return e.length>0?t(e):n(H||(H=(0,R.Z)(["Add a flight to display flight data here."])))}function Ge(e,t,n,a,r,o,i){return e.length>0?t(z||(z=(0,R.Z)(["Your total flight distance is "," miles.  If flying economy, this will have required around "," kwh of energy, and the total co2 emissions will be around "," tonnes. "])),n(a),r(o),r(i)):t(G||(G=(0,R.Z)([""])))}function Je(e,t){return e.map((function(e){var n=e[0],a=e[1],r={};r.from=n.name,r.to=a.name;for(var o=0,i=Object.entries(n);o<i.length;o++){var l=(0,Q.Z)(i[o],2),s=l[0],u=l[1];r[s+"_from"]=u}for(var c=0,d=Object.entries(a);c<d.length;c++){var f=(0,Q.Z)(d[c],2),p=f[0],m=f[1];r[p+"_to"]=m}var h=r.lat_from,b=r.lng_from,v=r.lat_to,g=r.lng_to;return r.distance=t(h,b,v,g),r}))}function We(e,t){return e.map((function(e){return{from:e.name_from,to:e.name_to,miles:t.format(",.0f")(e.distance)}}))}function Ye(e,t){return e.csvFormat(t)}function $e(e,t,n){return e.download(t(n),"flights","Download CSV")}function Qe(e){return e(J||(J=(0,R.Z)(["Bulk import previously created csv (needs at minimum `icao_from` and `icao_to` fields)"],["Bulk import previously created csv (needs at minimum \\`icao_from\\` and \\`icao_to\\` fields)"])))}function Re(e){return e(W||(W=(0,R.Z)(['<input type=file accept="text/csv" >'])))}function Ve(e,t,n,a){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,$.Z)(K().mark((function e(t,n,a,r){var o,i;return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text(n);case 2:o=e.sent,i=a.csvParse(o),r.value=i.map((function(e){return[e.icao_from,e.icao_to]})),r.dispatchEvent(new CustomEvent("input"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e,t){return e(t)}function Xe(e,t){return e.sum(t,(function(e){return e.distance}))}function et(e,t){return e.flying.flying_miles_to_kwh(t)}function tt(e){return function(t){return t*e.convert.per("kg_co2_from_jet_fuel/kwh")}}function nt(e,t,n){return e(t.flying.flying_miles_to_kwh(n))/1e3}function at(e){return e.format(",.0f")}function rt(e){return e.format(",.2r")}function ot(e){return e(Y||(Y=(0,R.Z)(["### Modules & Imports"])))}function it(e){return e("d3")}function lt(e){return e("@robinl/energy_usage@0.1.6")}function st(e){return function(t){return new Blob([e.csvFormat(t)],{type:"text/csv"})}}function ut(){return function(e,t,n,a){function r(e){return e*(Math.PI/180)}var o=r(n-e),i=r(a-t),l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(r(e))*Math.cos(r(n))*Math.sin(i/2)*Math.sin(i/2);return.621371*(6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))))}}function ct(e){return e.text("https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat").then((function(t){var n="id,name,city,country,iata,icao,lat,lng\n"+t;return e.csvParse(n,e.autoType)}))}function dt(e){return new Map(e.map((function(e){return[e.icao,e]})))}function ft(e){return e.map((function(e){return"".concat(e.name," ").concat(e.city," ").concat(e.country," ").concat(e.iata," (").concat(e.icao,")")}))}function pt(){return function(e){var t=/\((\w{4})\)$/g.exec(e);if(t)return t[1]}}function mt(e,t){var n=e.module();n.variable(t("title")).define("title",["md"],qe),n.variable(t()).define(["md"],Le),n.variable(t("viewof flights_list")).define("viewof flights_list",["html","options","get_icao_from_value"],Be),n.variable(t("flights_list")).define("flights_list",["Generators","viewof flights_list"],(function(e,t){return e.input(t)})),n.variable(t("selected_airports")).define("selected_airports",["flights_list","airports_icao_dict"],He),n.variable(t("table_of_distances")).define("table_of_distances",["data_for_table","table","md"],ze),n.variable(t("blurb")).define("blurb",["data_for_table","md","fmt_num","total_flight_miles","fmt_num_round","total_energy_usage","tonnes_co2"],Ge),n.variable(t("selected_airports_with_distances")).define("selected_airports_with_distances",["selected_airports","getDistanceFromLatLonInMiles"],Je),n.variable(t("data_for_table")).define("data_for_table",["selected_airports_with_distances","d3"],We),n.variable(t()).define(["d3","selected_airports_with_distances"],Ye),n.variable(t("download_as_csv")).define("download_as_csv",["DOM","serialize","selected_airports_with_distances"],$e),n.variable(t("file_upload_blurb")).define("file_upload_blurb",["md"],Qe),n.variable(t("viewof upload")).define("viewof upload",["html"],Re),n.variable(t("upload")).define("upload",["Generators","viewof upload"],(function(e,t){return e.input(t)})),n.variable(t("csv_data")).define("csv_data",["Files","upload","d3","viewof flights_list"],Ve),n.variable(t("flights_chart")).define("flights_chart",["chart","selected_airports_with_distances"],Ue),n.variable(t("total_flight_miles")).define("total_flight_miles",["d3","selected_airports_with_distances"],Xe),n.variable(t("total_energy_usage")).define("total_energy_usage",["eu","total_flight_miles"],et),n.variable(t("kwh_to_kg_co2")).define("kwh_to_kg_co2",["eu"],tt),n.variable(t("tonnes_co2")).define("tonnes_co2",["kwh_to_kg_co2","eu","total_flight_miles"],nt),n.variable(t("fmt_num")).define("fmt_num",["d3"],at),n.variable(t("fmt_num_round")).define("fmt_num_round",["d3"],rt),n.variable(t()).define(["md"],ot),n.variable(t("d3")).define("d3",["require"],it),n.variable(t("eu")).define("eu",["require"],lt);var a=e.module(de);n.import("chart",a);var r=e.module(De);return n.import("table",r),n.variable(t("serialize")).define("serialize",["d3"],st),n.variable(t("getDistanceFromLatLonInMiles")).define("getDistanceFromLatLonInMiles",ut),n.variable(t("airports")).define("airports",["d3"],ct),n.variable(t("airports_icao_dict")).define("airports_icao_dict",["airports"],dt),n.variable(t("options")).define("options",["airports"],ft),n.variable(t("get_icao_from_value")).define("get_icao_from_value",pt),n}var ht=n(2263),bt=n(674),vt={title:"Flight distance calculator",post_date:"2019-10-09",code_url:"https://observablehq.com/@robinl/flight-distance-calculator/",post_type:"obs",post_category:"energy",description:"Simple flight distance calculator.  Advert free.  Export data to spreadsheet."},gt=["title","viewof flights_list","blurb","table_of_distances","download_as_csv","flights_chart","file_upload_blurb","viewof upload"],yt=function(e){e.data;return(0,bt.tZ)(ht.Z,{define:mt,output_order:gt,post_frontmatter:vt})}}}]);
//# sourceMappingURL=component---src-pages-flight-distance-jsx-93cd2c5dfebb8d7b6f40.js.map