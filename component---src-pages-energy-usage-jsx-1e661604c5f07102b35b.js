(self.webpackChunkgatsby_starter_hello_world=self.webpackChunkgatsby_starter_hello_world||[]).push([[897],{2465:function(e,t,n){"use strict";function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{Z:function(){return i}})},6790:function(e,t,n){"use strict";var i=n(3157),r=n(7466),a=n(9974),o=function(e,t,n,u,l,s,d,c){for(var f,_=l,p=0,h=!!d&&a(d,c,3);p<u;){if(p in n){if(f=h?h(n[p],p,t):n[p],s>0&&i(f))_=o(e,t,f,r(f.length),_,s-1)-1;else{if(_>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[_]=f}_++}p++}return _};e.exports=o},4944:function(e,t,n){"use strict";var i=n(2109),r=n(6790),a=n(7908),o=n(7466),u=n(9958),l=n(5417);i({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=a(this),n=o(t.length),i=l(t,0);return i.length=r(i,t,t,n,0,void 0===e?1:u(e)),i}})},2263:function(e,t,n){"use strict";n(7294);var i=n(835),r=n(8847),a=n(7414),o=n(6140),u=n(674);t.Z=function(e){var t;return t=e.define?(0,u.tZ)(r.Z,{define:e.define,output_order:e.output_order}):e.children,(0,u.tZ)(i.Z,{css:e.className},(0,u.tZ)(o.Z,{title:e.post_frontmatter.title,description:e.post_frontmatter.description}),(0,u.tZ)(a.Z,{post_frontmatter:e.post_frontmatter}),t)}},6143:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Rr},frontmatter:function(){return Pr}});n(7294);var i,r,a,o,u=n(2137),l=n(2465),s=n(7757),d=n.n(s);function c(e){return e(i||(i=(0,l.Z)(["# Utils v2"])))}function f(e,t){return function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"25px";return e.bind(t(r||(r=(0,l.Z)(["<input type=",' style="width:',';">'])),i,a),n)}}function _(e){return e("@observablehq/inputs")}function p(e,t){return function(n){return e.bind(t(a||(a=(0,l.Z)(['<select>\n    <option value="minutes">minute</option>\n    <option value="hours">hour</option>\n    <option value="days">day</option>\n    <option value="weeks">week</option>\n    <option value="months">month</option>\n    <option value="years">year</option>\n  </select>']))),n)}}function h(e){return new e.input(1e4)}function v(e,t,n){return e(o||(o=(0,l.Z)([" You drive an average \n"," \nmiles per \n\nmiles per imperial gallon"])),t(n,"number","60px"))}function m(e){return e}function g(e,t){var n=e.module();return n.variable(t()).define(["md"],c),n.variable(t("inline_input")).define("inline_input",["inputs","html"],f),n.variable(t("inputs")).define("inputs",["require"],_),n.variable(t("time_period_picker")).define("time_period_picker",["inputs","html"],p),n.variable(t("viewof miles")).define("viewof miles",["inputs"],h),n.variable(t("miles")).define("miles",["Generators","viewof miles"],(function(e,t){return e.input(t)})),n.variable(t("driving_text")).define("driving_text",["md","inline_input","viewof miles"],v),n.variable(t()).define(["miles"],m),n}var b,w,y,k,x,Z,A,q,S,G,D,j,L,E,P,I,z,R,N,T,F,V,B,C,U,O,M,H,W,Y,Q,K,J;n(4944);function X(e){return e(b||(b=(0,l.Z)(["# Unit chart"])))}function $(e){return e("d3@5","d3-scale-chromatic@^1.4.0")}function ee(e){return{"label a":15.5,"b stuff":42.2,"c another label":e}}function te(){return function(e){var t=Object.keys(e).map((function(t){return{key:t,value:e[t]}}));return t.sort((function(e,t){return t.value-e.value})),t.map((function(e){var t=e.value,n=Math.ceil(t),i=Array(n).fill(0);return i=i.map((function(n,i){return{key:e.key,value:i+1>t?t-i:1}}))})).flat()}}function ne(e){return e(w||(w=(0,l.Z)(["<input type=range min=0 max=100 step=0.25>"])))}function ie(e,t){return e(t)}function re(e,t,n){return e(t,n)}function ae(e,t,n,i){return function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){a>640&o&&(a=640);var e=20,u=t(r),l=0,s=20,d=0,c=0,f=a-c-s,_=u.reduce((function(e,t){return e+t.value}),0),p=Math.floor(f/e),h=Math.ceil(_/p)*e,v=p-_%p<7,m=0;v&&(m=e);var g=h+m+l+d-l-d,b=n.scaleOrdinal().range(n.schemeCategory10).domain(["Driving","Flying","Heating","Stuff","Showers","Food/Eating","Washing machine","Dishwasher","Dogs"]),w=n.select(i.svg(f+c+s,g+l+d)),y=w.append("g").attr("transform","translate("+c+","+l+")");y.selectAll("c_rect").data(u).enter().append("rect").attr("x",(function(t,n){return n%p*e})).attr("y",(function(t,n){return Math.floor(n/p)*e})).attr("width",(function(e){return 16*e.value})).attr("height",16).attr("fill",(function(e){return b(e.key)})),y.selectAll("g_rect").data(u).enter().append("rect").attr("x",(function(t,n){return n%p*e})).attr("y",(function(t,n){return Math.floor(n/p)*e})).attr("width",(function(e){return 16})).attr("height",16).attr("stroke","gray").attr("stroke-width",.5).attr("fill","none");var k=u.reduce((function(e,t){return e+t.value}),0).toFixed(1)+" kwh/day",x=0;v||(x=(u.length-1)%p*e+e);var Z=Math.floor((u.length-1)/p)*e;return v&&(Z+=e),y.append("text").attr("x",x).attr("dx",2).attr("y",Z).attr("dy",10).style("text-anchor","left").style("alignment-baseline","middle").style("font-size","1em").text(k),w.node()}()}}function oe(e,t,n){return e(t,n)}function ue(e,t,n,i,r){return function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){o>640&u&&(o=640);var e=20,l=t(a),s=0,d=20,c=0,f=100,_=o-f-d,p=(l.reduce((function(e,t){return e+t.value}),0),Math.floor(_/e)),h=n(l,p),v=i.nest().key((function(e){return e.key})).rollup((function(e){return i.extent(e,(function(e){return e.y}))})).entries(h),m=(h.slice(-1)[0].y+1)*e+s+c-s-c,g=i.scaleOrdinal().range(i.schemeCategory10).domain(["Driving","Flying","Heating","Stuff","Showers","Food/Eating","Washing machine","Dishwasher","Dogs"]),b=i.select(r.svg(_+f+d,m+s+c)),w=b.append("g").attr("transform","translate("+f+","+s+")");return w.selectAll("c_rect").data(h).enter().append("rect").attr("x",(function(t){return t.x*e})).attr("y",(function(t){return t.y*e})).attr("width",(function(e){return 16*e.value})).attr("height",16).attr("fill",(function(e){return g(e.key)})),w.selectAll("g_rect").data(h).enter().append("rect").attr("x",(function(t){return t.x*e})).attr("y",(function(t){return t.y*e})).attr("width",16).attr("height",16).attr("fill",null).attr("stroke","gray").attr("stroke-width",.5).attr("fill","none"),w.selectAll("a_text").data(v).enter().append("text").attr("x",0).attr("dx",-6).attr("y",(function(t){return i.mean(t.value)*e})).attr("dy",10).style("text-anchor","end").style("alignment-baseline","middle").style("font-size",(function(e){return function(e){return e.key.length<=10?"1rem":10/e.key.length+"rem"}(e)})).text((function(e){return e.key})),b.node()}()}}function le(){return function(e,t){var n=0,i=0,r=e[0].key;return e.map((function(e){return r!=e.key?(i+=1.5,n=0):n>t&&(n=0,i+=1),e.x=n,e.y=i,r=e.key,n+=1,e}))}}function se(e,t,n){return e(t(n),10)}function de(e,t){return e.nest().key((function(e){return e.key})).rollup((function(t){return e.extent(t,(function(e){return e.y}))})).entries(t)}function ce(e){return e(y||(y=(0,l.Z)(['Each full square ( <svg width=16 height=16><rect x="0" y="0" width="16" height="16" fill="#BBB" stroke="gray"></rect></svg> ) in the visualisations represents 1 kilowatt hour (kwh), the amount of energy consumed by using 1000 watts of power for one hour.  '])))}function fe(e,t){var n=e.module();return n.variable(t()).define(["md"],X),n.variable(t("d3")).define("d3",["require"],$),n.variable(t("data")).define("data",["slider"],ee),n.variable(t("get_d3_data")).define("get_d3_data",te),n.variable(t("viewof slider")).define("viewof slider",["html"],ne),n.variable(t("slider")).define("slider",["Generators","viewof slider"],(function(e,t){return e.input(t)})),n.variable(t("d3_data")).define("d3_data",["get_d3_data","data"],ie),n.variable(t()).define(["unit_chart","data","width"],re),n.variable(t("unit_chart")).define("unit_chart",["width","get_d3_data","d3","DOM"],ae),n.variable(t()).define(["unit_chart_2","data","width"],oe),n.variable(t("unit_chart_2")).define("unit_chart_2",["width","get_d3_data","munge_data","d3","DOM"],ue),n.variable(t("munge_data")).define("munge_data",le),n.variable(t("munged")).define("munged",["munge_data","get_d3_data","data"],se),n.variable(t("text_positions")).define("text_positions",["d3","munged"],de),n.variable(t("key")).define("key",["md"],ce),n}function _e(e){return e(k||(k=(0,l.Z)(["# Driving"])))}function pe(e){return e("@observablehq/inputs")}function he(e,t,n,i,r,a){return e(x||(x=(0,l.Z)([" You drive an average \n"," \nmiles per \n"," in a vehicle that gets an average of \n","\nmiles per imperial gallon"])),t(n,"number","60px"),i(r),t(a,"number","45px"))}function ve(e,t,n,i){return e.driving.miles_driven_to_kwh_per_day(t,n,i)}function me(e,t){return e({Driving:t})}function ge(e,t){return e.utils.format_kwh(t)}function be(e,t){return e(Z||(Z=(0,l.Z)(["= "," kwh per day"])),t)}function we(e){return[{name:"Driving",value:e}]}function ye(e){return new e.input(1e4)}function ke(e){return new e.input(45)}function xe(e){return new e.input("years")}function Ze(e){return e("@robinl/energy_usage@0.0.22")}function Ae(e,t){var n=e.module();n.variable(t()).define(["md"],_e),n.variable(t("inputs")).define("inputs",["require"],pe);var i=e.module(g);n.import("inline_input",i),n.import("time_period_picker",i);var r=e.module(fe);return n.import("unit_chart",r),n.variable(t("driving_text")).define("driving_text",["md","inline_input","viewof miles","time_period_picker","viewof miles_driven_period","viewof miles_per_gallon"],he),n.variable(t("kwh")).define("kwh",["eu","miles","miles_driven_period","miles_per_gallon"],ve),n.variable(t("driving_chart")).define("driving_chart",["unit_chart","kwh"],me),n.variable(t("kwh_formatted")).define("kwh_formatted",["eu","kwh"],ge),n.variable(t("driving_conclusion")).define("driving_conclusion",["md","kwh_formatted"],be),n.variable(t("driving_data")).define("driving_data",["kwh"],we),n.variable(t("viewof miles")).define("viewof miles",["inputs"],ye),n.variable(t("miles")).define("miles",["Generators","viewof miles"],(function(e,t){return e.input(t)})),n.variable(t("viewof miles_per_gallon")).define("viewof miles_per_gallon",["inputs"],ke),n.variable(t("miles_per_gallon")).define("miles_per_gallon",["Generators","viewof miles_per_gallon"],(function(e,t){return e.input(t)})),n.variable(t("viewof miles_driven_period")).define("viewof miles_driven_period",["inputs"],xe),n.variable(t("miles_driven_period")).define("miles_driven_period",["Generators","viewof miles_driven_period"],(function(e,t){return e.input(t)})),n.variable(t("eu")).define("eu",["require"],Ze),n}function qe(e){return e(A||(A=(0,l.Z)(["# Flying"])))}function Se(e){return e("@observablehq/inputs")}function Ge(e,t,n,i,r){return e(q||(q=(0,l.Z)([" You fly an average of\n"," \nmiles per \n","\nin economy class.  (Business class/first class would probably be double this or more)\n"])),t(n,"number","60px"),i(r))}function De(e,t,n){return e.flying.flying_miles_to_kwh(t,n)}function je(e,t){return e.utils.format_kwh(t)}function Le(e,t){return e(S||(S=(0,l.Z)(["= "," kwh per day"])),t)}function Ee(e,t){return e({Flying:t})}function Pe(e){return[{name:"Flying",value:e}]}function Ie(e){return new e.input(12e3)}function ze(e){return new e.input("years")}function Re(e){return e("@robinl/energy_usage@0.0.22")}function Ne(e,t){var n=e.module();n.variable(t()).define(["md"],qe),n.variable(t("inputs")).define("inputs",["require"],Se);var i=e.module(g);n.import("inline_input",i),n.import("time_period_picker",i),n.variable(t("flying_text")).define("flying_text",["md","inline_input","viewof miles","time_period_picker","viewof miles_flown_period"],Ge),n.variable(t("kwh")).define("kwh",["eu","miles","miles_flown_period"],De),n.variable(t("kwh_formatted")).define("kwh_formatted",["eu","kwh"],je),n.variable(t("flying_conclusion")).define("flying_conclusion",["md","kwh_formatted"],Le),n.variable(t("flying_chart")).define("flying_chart",["unit_chart","kwh"],Ee),n.variable(t("flying_data")).define("flying_data",["kwh"],Pe),n.variable(t("viewof miles")).define("viewof miles",["inputs"],Ie),n.variable(t("miles")).define("miles",["Generators","viewof miles"],(function(e,t){return e.input(t)})),n.variable(t("viewof miles_flown_period")).define("viewof miles_flown_period",["inputs"],ze),n.variable(t("miles_flown_period")).define("miles_flown_period",["Generators","viewof miles_flown_period"],(function(e,t){return e.input(t)})),n.variable(t("eu")).define("eu",["require"],Re);var r=e.module(fe);return n.import("unit_chart",r),n}function Te(e){return e(G||(G=(0,l.Z)(["# Electricity"])))}function Fe(e){return e("@observablehq/inputs")}function Ve(e,t,n,i){return e(D||(D=(0,l.Z)([" Your energy bill says you use \n"," KWh of electricity\nper year and there are \n"," \npeople in your household.\n"])),t(n,"number","60px"),t(i,"number","45px"))}function Be(e,t,n){return e.electricity.electricity_kwh_per_day(t,n)}function Ce(e,t){return e.utils.format_kwh(t)}function Ue(e,t){return e(j||(j=(0,l.Z)(["= "," kwh per day"])),t)}function Oe(e,t){return e({Electricity:t})}function Me(e){return[{name:"Electricity",value:e}]}function He(e){return new e.input(1800)}function We(e){return new e.input(2)}function Ye(e){return e("@robinl/energy_usage@0.1.7")}function Qe(e,t){var n=e.module();n.variable(t()).define(["md"],Te),n.variable(t("inputs")).define("inputs",["require"],Fe);var i=e.module(Ne);n.import("inline_input",i),n.import("time_period_picker",i),n.variable(t("electricity_text")).define("electricity_text",["md","inline_input","viewof actual_usage_from_bill","viewof num_occupants"],Ve),n.variable(t("kwh")).define("kwh",["eu","actual_usage_from_bill","num_occupants"],Be),n.variable(t("kwh_formatted")).define("kwh_formatted",["eu","kwh"],Ce),n.variable(t("electricity_conclusion")).define("electricity_conclusion",["md","kwh_formatted"],Ue),n.variable(t("electricity_chart")).define("electricity_chart",["unit_chart","kwh"],Oe),n.variable(t("electricity_data")).define("electricity_data",["kwh"],Me),n.variable(t("viewof actual_usage_from_bill")).define("viewof actual_usage_from_bill",["inputs"],He),n.variable(t("actual_usage_from_bill")).define("actual_usage_from_bill",["Generators","viewof actual_usage_from_bill"],(function(e,t){return e.input(t)})),n.variable(t("viewof num_occupants")).define("viewof num_occupants",["inputs"],We),n.variable(t("num_occupants")).define("num_occupants",["Generators","viewof num_occupants"],(function(e,t){return e.input(t)})),n.variable(t("eu")).define("eu",["require"],Ye);var r=e.module(fe);return n.import("unit_chart",r),n}function Ke(e){return e(L||(L=(0,l.Z)(["# Pets"])))}function Je(e){return e("@observablehq/inputs")}function Xe(e,t,n,i){return e(E||(E=(0,l.Z)([" You have \n"," \ndog(s) who weigh \n"," \nkg each (on average)\n"])),t(n,"number","30px"),t(i,"number","50px"))}function $e(e,t,n){return e*t.pets.kwh_required_by_dogs_per_day(n)}function et(e,t){return e.utils.format_kwh(t)}function tt(e,t){return e({Dogs:t})}function nt(e,t){return e(P||(P=(0,l.Z)(["= "," kwh per day"])),t)}function it(e){return[{name:"Dogs",value:e}]}function rt(e){return new e.input(1)}function at(e){return new e.input(15)}function ot(e){return e("@robinl/energy_usage@0.0.22")}function ut(e,t){var n=e.module();n.variable(t()).define(["md"],Ke),n.variable(t("inputs")).define("inputs",["require"],Je);var i=e.module(Qe);n.import("inline_input",i),n.import("time_period_picker",i),n.variable(t("dogs_text")).define("dogs_text",["md","inline_input","viewof num_dogs","viewof dogs_weight_kg"],Xe),n.variable(t("kwh")).define("kwh",["num_dogs","eu","dogs_weight_kg"],$e),n.variable(t("kwh_formatted")).define("kwh_formatted",["eu","kwh"],et),n.variable(t("dogs_chart")).define("dogs_chart",["unit_chart","kwh"],tt),n.variable(t("dogs_conclusion")).define("dogs_conclusion",["md","kwh_formatted"],nt),n.variable(t("dogs_data")).define("dogs_data",["kwh"],it),n.variable(t("viewof num_dogs")).define("viewof num_dogs",["inputs"],rt),n.variable(t("num_dogs")).define("num_dogs",["Generators","viewof num_dogs"],(function(e,t){return e.input(t)})),n.variable(t("viewof dogs_weight_kg")).define("viewof dogs_weight_kg",["inputs"],at),n.variable(t("dogs_weight_kg")).define("dogs_weight_kg",["Generators","viewof dogs_weight_kg"],(function(e,t){return e.input(t)})),n.variable(t("eu")).define("eu",["require"],ot);var r=e.module(fe);return n.import("unit_chart",r),n}function lt(e){return e(I||(I=(0,l.Z)(["# Eating"])))}function st(e){return e("@observablehq/inputs")}function dt(e,t,n,i,r,a,o,u,s,d,c){return e(z||(z=(0,l.Z)([" You are \n"," \ncm high, \nyou are \n"," \nyears old,\nyou weigh\n"," \nkg,\nyou're\n"," \nand you have a \n"," \nlifestyle, and your diet type is \n","\n"])),t(n,"number","3rem"),t(i,"number","3rem"),t(r,"number","60px"),a(o),u(s),d(c))}function ct(e,t,n,i,r){return e(R||(R=(0,l.Z)([" You have a "," \nlifestyle, and your diet type is \n","\n"])),t(n),i(r))}function ft(e,t,n){return e.eating.kwh_per_day(84,165,40,"Female",t,n)}function _t(e,t){return e.utils.format_kwh(t)}function pt(e,t){return e({"Food/Eating":t})}function ht(e,t){return e(N||(N=(0,l.Z)(["= "," kwh per day"])),t)}function vt(e){return[{name:"Food/Eating",value:e}]}function mt(e){return new e.input(68)}function gt(e){return new e.input(178)}function bt(e){return new e.input(34)}function wt(e){return new e.input("male")}function yt(e){return new e.input("moderately_active")}function kt(e){return new e.input("omnivore")}function xt(e){return e("@robinl/energy_usage@0.0.25")}function Zt(e,t){return function(n){return e.bind(t(T||(T=(0,l.Z)(['<select>\n    <option value="sedentary_light">Sedentary/lightly active</option>\n    <option value="moderately_active">Moderately active</option>\n    <option value="vigorous">Vigorous</option>\n  </select>']))),n)}}function At(e,t){return function(n){return e.bind(t(F||(F=(0,l.Z)(['<select>\n    <option value="male">Male</option>\n    <option value="female">Female</option>\n  </select>']))),n)}}function qt(e,t){return function(n){return e.bind(t(V||(V=(0,l.Z)(['<select>\n    <option value="omnivore">Omnivore</option>\n    <option value="vegetarian">Vegetarian</option>\n    <option value="vegan">Vegan</option>\n  </select>']))),n)}}function St(e,t){var n=e.module();n.variable(t()).define(["md"],lt),n.variable(t("inputs")).define("inputs",["require"],st);var i=e.module(g);n.import("inline_input",i),n.import("time_period_picker",i),n.variable(t("eating_text_more")).define("eating_text_more",["md","inline_input","viewof height_cm","viewof age_years","viewof weight_kg","gender_picker","viewof gender","activity_level_picker","viewof activity_level","diet_picker","viewof diet_type"],dt),n.variable(t("eating_text")).define("eating_text",["md","activity_level_picker","viewof activity_level","diet_picker","viewof diet_type"],ct),n.variable(t("kwh")).define("kwh",["eu","activity_level","diet_type"],ft),n.variable(t("kwh_formatted")).define("kwh_formatted",["eu","kwh"],_t),n.variable(t("eating_chart")).define("eating_chart",["unit_chart","kwh"],pt),n.variable(t("eating_conclusion")).define("eating_conclusion",["md","kwh_formatted"],ht),n.variable(t("eating_data")).define("eating_data",["kwh"],vt),n.variable(t("viewof weight_kg")).define("viewof weight_kg",["inputs"],mt),n.variable(t("weight_kg")).define("weight_kg",["Generators","viewof weight_kg"],(function(e,t){return e.input(t)})),n.variable(t("viewof height_cm")).define("viewof height_cm",["inputs"],gt),n.variable(t("height_cm")).define("height_cm",["Generators","viewof height_cm"],(function(e,t){return e.input(t)})),n.variable(t("viewof age_years")).define("viewof age_years",["inputs"],bt),n.variable(t("age_years")).define("age_years",["Generators","viewof age_years"],(function(e,t){return e.input(t)})),n.variable(t("viewof gender")).define("viewof gender",["inputs"],wt),n.variable(t("gender")).define("gender",["Generators","viewof gender"],(function(e,t){return e.input(t)})),n.variable(t("viewof activity_level")).define("viewof activity_level",["inputs"],yt),n.variable(t("activity_level")).define("activity_level",["Generators","viewof activity_level"],(function(e,t){return e.input(t)})),n.variable(t("viewof diet_type")).define("viewof diet_type",["inputs"],kt),n.variable(t("diet_type")).define("diet_type",["Generators","viewof diet_type"],(function(e,t){return e.input(t)})),n.variable(t("eu")).define("eu",["require"],xt),n.variable(t("activity_level_picker")).define("activity_level_picker",["inputs","html"],Zt),n.variable(t("gender_picker")).define("gender_picker",["inputs","html"],At),n.variable(t("diet_picker")).define("diet_picker",["inputs","html"],qt);var r=e.module(fe);return n.import("unit_chart",r),n}function Gt(e){return e(B||(B=(0,l.Z)(["# Heating and gas"])))}function Dt(e){return e("@observablehq/inputs")}function jt(e,t,n,i,r,a){return e(C||(C=(0,l.Z)([" Your energy bill says you use \n"," \n"," \nper year and there are \n"," \npeople in your household.\n\n\n"])),t(n,"number","60px"),i(r),t(a,"number","45px"))}function Lt(e){return e(U||(U=(0,l.Z)(["## Need to take out showers and baths from heating"])))}function Et(e,t,n,i,r,a,o){return e(O||(O=(0,l.Z)(["\nYou take \n"," \nshower(s) a day averaging \n"," \nminutes with water flow of \n","\nml per second.\n\nYou have \n"," \nbath(s) a day, each one of which contains \n"," litres of water.\n"])),t(n,"number","30px"),t(i,"number","30px"),t(r,"number","45px"),t(a,"number","30px"),t(o,"number","45px"))}function Pt(e,t,n,i,r,a){return e.heating.heating_kwh_per_day(t,19,19,n,i)-(r-a)*n}function It(e,t,n,i){return e.shower_bath.shower_get_daily_kwh(t,n,i)}function zt(e,t,n){return e.shower_bath.bath_get_daily_kwh(t,n)}function Rt(e,t){return e.utils.format_kwh(t)}function Nt(e,t){return e(M||(M=(0,l.Z)(["= "," kwh per day"])),t)}function Tt(e,t,n){return[{name:"Heating",value:e},{name:"Showers",value:t},{name:"Baths",value:n}]}function Ft(e,t){return e({Heating:t})}function Vt(e,t,n){return e({Showers:t,Baths:n})}function Bt(e){return new e.input(597)}function Ct(e){return new e.input("metric_gas_units")}function Ut(e){return new e.input(2)}function Ot(e){return new e.input(2)}function Mt(e){return new e.input(0)}function Ht(e){return new e.input(4)}function Wt(e){return new e.input(135)}function Yt(e){return new e.input(150)}function Qt(e){return e("@robinl/energy_usage@0.1.9")}function Kt(e,t){return function(n){return e.bind(t(H||(H=(0,l.Z)(['<select>\n    <option value="kwh">kwh</option>\n    <option value="imperial_gas_units">Imperial units (100s of cubic feet)</option>\n    <option value="metric_gas_units">Metrics units</option>\n  </select>']))),n)}}function Jt(e,t){var n=e.module();n.variable(t()).define(["md"],Gt),n.variable(t("inputs")).define("inputs",["require"],Dt);var i=e.module(g);n.import("inline_input",i),n.variable(t("heating_text")).define("heating_text",["md","inline_input","viewof actual_usage_from_bill","units_picker","viewof bill_units","viewof num_occupants"],jt),n.variable(t()).define(["md"],Lt),n.variable(t("showers_and_baths_text")).define("showers_and_baths_text",["md","inline_input","viewof num_showers","viewof shower_minutes","viewof shower_flow","viewof num_baths","viewof bath_litres"],Et),n.variable(t("heating_kwh")).define("heating_kwh",["eu","actual_usage_from_bill","num_occupants","bill_units","showers_kwh","baths_kwh"],Pt),n.variable(t("showers_kwh")).define("showers_kwh",["eu","num_showers","shower_flow","shower_minutes"],It),n.variable(t("baths_kwh")).define("baths_kwh",["eu","num_baths","bath_litres"],zt),n.variable(t("kwh_formatted")).define("kwh_formatted",["eu","heating_kwh"],Rt),n.variable(t("heating_conclusion")).define("heating_conclusion",["md","kwh_formatted"],Nt),n.variable(t("heating_gas_data")).define("heating_gas_data",["heating_kwh","showers_kwh","baths_kwh"],Tt),n.variable(t("heating_chart")).define("heating_chart",["unit_chart","heating_kwh"],Ft),n.variable(t("showers_bath_chart")).define("showers_bath_chart",["unit_chart","showers_kwh","baths_kwh"],Vt),n.variable(t("viewof actual_usage_from_bill")).define("viewof actual_usage_from_bill",["inputs"],Bt),n.variable(t("actual_usage_from_bill")).define("actual_usage_from_bill",["Generators","viewof actual_usage_from_bill"],(function(e,t){return e.input(t)})),n.variable(t("viewof bill_units")).define("viewof bill_units",["inputs"],Ct),n.variable(t("bill_units")).define("bill_units",["Generators","viewof bill_units"],(function(e,t){return e.input(t)})),n.variable(t("viewof num_occupants")).define("viewof num_occupants",["inputs"],Ut),n.variable(t("num_occupants")).define("num_occupants",["Generators","viewof num_occupants"],(function(e,t){return e.input(t)})),n.variable(t("viewof num_showers")).define("viewof num_showers",["inputs"],Ot),n.variable(t("num_showers")).define("num_showers",["Generators","viewof num_showers"],(function(e,t){return e.input(t)})),n.variable(t("viewof num_baths")).define("viewof num_baths",["inputs"],Mt),n.variable(t("num_baths")).define("num_baths",["Generators","viewof num_baths"],(function(e,t){return e.input(t)})),n.variable(t("viewof shower_minutes")).define("viewof shower_minutes",["inputs"],Ht),n.variable(t("shower_minutes")).define("shower_minutes",["Generators","viewof shower_minutes"],(function(e,t){return e.input(t)})),n.variable(t("viewof shower_flow")).define("viewof shower_flow",["inputs"],Wt),n.variable(t("shower_flow")).define("shower_flow",["Generators","viewof shower_flow"],(function(e,t){return e.input(t)})),n.variable(t("viewof bath_litres")).define("viewof bath_litres",["inputs"],Yt),n.variable(t("bath_litres")).define("bath_litres",["Generators","viewof bath_litres"],(function(e,t){return e.input(t)})),n.variable(t("eu")).define("eu",["require"],Qt),n.variable(t("units_picker")).define("units_picker",["inputs","html"],Kt);var r=e.module(fe);return n.import("unit_chart",r),n}function Xt(e){return e(W||(W=(0,l.Z)(["# Stuff"])))}function $t(e){return e("@observablehq/inputs")}function en(e,t,n,i,r){return e(Y||(Y=(0,l.Z)([" You spend an average of \n£ "," \nper ","\non 'stuff'.\n\n('Stuff' includes things like clothes, electronics, white goods and cars, but excludes items otherwise accounted for such as food, petrol and flights)\n"])),t(n,"number","60px"),i(r))}function tn(e,t,n){return e.stuff.pounds_sterling_to_kwh(t)/e.convert.convert_units(n,"days")}function nn(e,t){return e.utils.format_kwh(t)}function rn(e,t){return e(Q||(Q=(0,l.Z)(["= "," kwh per day"])),t)}function an(e,t){return e({Stuff:t})}function on(e){return[{name:"Stuff",value:e}]}function un(e){return new e.input(500)}function ln(e){return new e.input("months")}function sn(e){return e("@robinl/energy_usage@0.0.31")}function dn(e,t){var n=e.module();n.variable(t()).define(["md"],Xt),n.variable(t("inputs")).define("inputs",["require"],$t);var i=e.module(g);n.import("inline_input",i),n.import("time_period_picker",i),n.variable(t("stuff_text")).define("stuff_text",["md","inline_input","viewof spending","time_period_picker","viewof spending_time_period"],en),n.variable(t("kwh")).define("kwh",["eu","spending","spending_time_period"],tn),n.variable(t("kwh_formatted")).define("kwh_formatted",["eu","kwh"],nn),n.variable(t("stuff_conclusion")).define("stuff_conclusion",["md","kwh_formatted"],rn),n.variable(t("stuff_chart")).define("stuff_chart",["unit_chart","kwh"],an),n.variable(t("stuff_data")).define("stuff_data",["kwh"],on),n.variable(t("viewof spending")).define("viewof spending",["inputs"],un),n.variable(t("spending")).define("spending",["Generators","viewof spending"],(function(e,t){return e.input(t)})),n.variable(t("viewof spending_time_period")).define("viewof spending_time_period",["inputs"],ln),n.variable(t("spending_time_period")).define("spending_time_period",["Generators","viewof spending_time_period"],(function(e,t){return e.input(t)})),n.variable(t("eu")).define("eu",["require"],sn);var r=e.module(fe);return n.import("unit_chart",r),n}function cn(e){return e(K||(K=(0,l.Z)(["# Energy usage treemap and summary"])))}function fn(e,t,n){return function(i){var r=e(i),a=r/24*1e3;return t(J||(J=(0,l.Z)(["You use a total of __"," kilowatt hours__ of energy a day from the activities covered on this webpage. This means your average power consumption is "," watts. "])),n(r),n(a))}}function _n(){return function(e){return e.reduce((function(e,t){return e+t.value}),0)}}function pn(){return[{name:"Showers",value:2.5104},{name:"Driving",value:26.293975646879755},{name:"Flying",value:13.425863835616436},{name:"Washing machine",value:4.2},{name:"Dishwasher",value:.6},{name:"Food/Eating",value:23.303485333333334},{name:"Dogs",value:.86730602373828}]}function hn(e,t){return e(t)}function vn(e,t,n,i,r,a){return function(o){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:640,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u>640&l&&(u=640);var s={name:"root",children:o},d=e(s,u),c=t.scaleOrdinal().range(t.schemeCategory10).domain(["Driving","Flying","Heating","Stuff","Showers","Food/Eating","Washing machine","Dishwasher","Dogs"]),f=o.reduce((function(e,t){return e+t.value}),0),_=n*n*f,p=_/u;console.log(f),console.log(_),console.log(p),console.log(u);var h=t.create("svg").attr("width",u).attr("height",p).style("font","10px sans-serif"),v=h.selectAll("g").data(d.leaves()).join("g").attr("transform",(function(e){return"translate(".concat(e.x0,",").concat(e.y0,")")}));return v.append("title").text((function(e){return"".concat(e.ancestors().reverse().map((function(e){return e.data.name})).join("/"),"\n").concat(i(e.value))})),v.append("rect").attr("id",(function(e){return(e.leafUid=r.uid("leaf")).id})).attr("fill",(function(e){for(;e.depth>1;)e=e.parent;return c(e.data.name)})).attr("fill-opacity",.7).attr("width",(function(e){return e.x1-e.x0})).attr("height",(function(e){return e.y1-e.y0})),v.append("clipPath").attr("id",(function(e){return(e.clipUid=r.uid("clip")).id})).append("use").attr("xlink:href",(function(e){return e.leafUid.href})),v.append("text").attr("clip-path",(function(e){return e.clipUid})).selectAll("tspan").data((function(e){return e.data.name.split(/(?=[A-Z][^A-Z])/g).concat(i(e.value)+" kwh").concat(a(e.value/e.parent.value))})).join("tspan").attr("x",3).attr("y",(function(e,t,n){return"".concat(.3*(t===n.length-1)+1.1+.9*t,"em")})).attr("fill-opacity",(function(e,t,n){return t===n.length-1?.7:null})).text((function(e){return e})),h.node()}}function mn(){return 22}function gn(e,t){return function(n,i){var r=n.children.reduce((function(e,t){return e+t.value}),0),a=e*e*r,o=a/i;return console.log("-- from treemap"),console.log(r),console.log(a),console.log(o),console.log("--"),t.treemap().tile(t.treemapBinary).size([i,o]).padding(1).round(!0)(t.hierarchy(n).sum((function(e){return e.value})).sort((function(e,t){return t.value-e.value})))}}function bn(e){return e.format(",.3r")}function wn(e){return e.format(",.1%")}function yn(e){return e.scaleOrdinal(e.schemeCategory10)}function kn(e){return e("d3@5")}function xn(e,t){var n=e.module();return n.variable(t()).define(["md"],cn),n.variable(t("summary_text")).define("summary_text",["get_total","md","format"],fn),n.variable(t("get_total")).define("get_total",_n),n.variable(t("my_data")).define("my_data",pn),n.variable(t()).define(["treemap_chart","my_data"],hn),n.variable(t("treemap_chart")).define("treemap_chart",["treemap","d3","grid_size","format","DOM","per_fmt"],vn),n.variable(t("grid_size")).define("grid_size",mn),n.variable(t("treemap")).define("treemap",["grid_size","d3"],gn),n.variable(t("format")).define("format",["d3"],bn),n.variable(t("per_fmt")).define("per_fmt",["d3"],wn),n.variable(t("color")).define("color",["d3"],yn),n.variable(t("d3")).define("d3",["require"],kn),n}var Zn,An,qn,Sn,Gn,Dn,jn,Ln,En,Pn,In,zn,Rn,Nn,Tn,Fn,Vn,Bn,Cn,Un,On,Mn,Hn,Wn,Yn,Qn,Kn,Jn,Xn,$n,ei,ti,ni=n(8481);function ii(e){return e(Zn||(Zn=(0,l.Z)(["# Vega-Lite API v4"])))}function ri(e){return e(An||(An=(0,l.Z)(["The [Vega-Lite JavaScript API](https://github.com/vega/vega-lite-api/) provides a convenient way to write [Vega-Lite](https://vega.github.io/vega-lite) specifications in a programmatic fashion. Scroll down for some usage examples, or browse the [Vega-Lite API example collection](https://observablehq.com/collection/@vega/vega-lite-api)!\n\nThis notebook uses **version 4** of Vega-Lite and the corresponding Vega-Lite API 4.0. _To use the more recent Vega-Lite version 5, see the [Vega-Lite API v5 notebook](https://observablehq.com/@vega/vega-lite-api-v5) instead._\n\nWant to learn more about data visualization and how to use the Vega-Lite API? Read the [introduction to Vega-Lite](https://observablehq.com/@uwdata/introduction-to-vega-lite) and the [data visualization curriculum](https://observablehq.com/@uwdata/data-visualization-curriculum?collection=@uwdata/visualization-curriculum)."])))}function ai(e){return e(qn||(qn=(0,l.Z)(["\nThe cell below imports the Vega-Lite API and registers the desired versions of Vega and Vega-Lite, along with default [Vega View options](https://vega.github.io/vega/docs/api/view/#view) and [Vega-Lite configuration](https://vega.github.io/vega-lite/docs/config.html):\n"])))}function oi(e){return ui.apply(this,arguments)}function ui(){return(ui=(0,u.Z)(d().mark((function e(t){var n,i,r,a,o,u,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(["vega@5.19.1","vega-lite@4.17.0","vega-lite-api@4.0.0","vega-tooltip@0.25.1"].map((function(e){return t(e)})));case 2:return n=e.sent,i=(0,ni.Z)(n,4),r=i[0],a=i[1],o=i[2],u=i[3],l={config:{config:{view:{continuousWidth:400,continuousHeight:300},mark:{tooltip:null}}},init:function(e){e.tooltip((new u.Handler).call),e.container()&&(e.container().style["overflow-x"]="auto")},view:{loader:r.loader({baseURL:"https://cdn.jsdelivr.net/npm/vega-datasets@2/"}),renderer:"canvas"}},e.abrupt("return",o.register(r,a,l));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function li(e){return e(Sn||(Sn=(0,l.Z)(["To use the same setup in your own notebooks, add a cell with the following code:\n~~~ js\nimport {vl} from '@vega/vega-lite-api'\n~~~\nTo use the API outside of Observable, see the [stand-alone usage instructions](#standalone_use) below.\n"])))}function si(e){return e(Gn||(Gn=(0,l.Z)(["## Zip Codes\n\nA dot for each zip code in the United States, colored by the first digit.\n"])))}function di(e,t){return e.markSquare({size:2,opacity:1}).data("data/zipcodes.csv").transform(e.calculate("substring(datum.zip_code, 0, 1)").as("digit")).project(e.projection("albersUsa")).encode(e.longitude().fieldQ("longitude"),e.latitude().fieldQ("latitude"),e.color().fieldN("digit")).width(t).height(Math.floor(t/1.75)).autosize({type:"fit-x",contains:"padding"}).config({view:{stroke:null}}).render()}function ci(e){return e(Dn||(Dn=(0,l.Z)(["## Interactive Seattle Weather 2012-2015\n\nA scatter plot and summary histogram with linked `selections` between plots to perform cross-filtering and configure conditional color encodings.\n"],["## Interactive Seattle Weather 2012-2015\n\nA scatter plot and summary histogram with linked \\`selections\\` between plots to perform cross-filtering and configure conditional color encodings.\n"])))}function fi(e,t){var n=e.selectInterval().encodings("x"),i=e.selectMulti().encodings("color"),r={domain:["sun","fog","drizzle","rain","snow"],range:["#e7ba52","#a7a7a7","#aec7e8","#1f77b4","#9467bd"]},a=e.markPoint({filled:!0}).encode(e.color().value("lightgray").if(n,e.color().fieldN("weather").scale(r).title("Weather")),e.size().fieldQ("precipitation").scale({domain:[-1,50],range:[10,500]}).title("Precipitation"),e.order().fieldQ("precipitation").sort("descending"),e.x().timeMD("date").axis({title:"Date",format:"%b"}),e.y().fieldQ("temp_max").scale({domain:[-5,40]}).axis({title:"Maximum Daily Temperature (°C)"})).width(t).height(300).select(n).transform(e.filter(i)),o=e.markBar().encode(e.color().value("lightgray").if(i,e.color().fieldN("weather").scale(r).title("Weather")),e.x().count(),e.y().fieldN("weather").scale({domain:r.domain}).title("Weather")).width(t).select(i).transform(e.filter(n));return e.vconcat(a,o).data("data/seattle-weather.csv").autosize({type:"fit-x",contains:"padding"}).render()}function _i(e){return e(jn||(jn=(0,l.Z)(["## Parallel Coordinates\n\nA [parallel coordinates plot](https://en.wikipedia.org/wiki/Parallel_coordinates) that uses `window` and `fold` transforms to convert the four dimensions of penguin measurements into normalized coordinates that can be visualized as `line` marks. The graphic includes an additional layer with custom `text` mark labels for the parallel axis grid lines. We render the plot as SVG by passing `{renderer:'svg'}` to the `render` method.\n"],["## Parallel Coordinates\n\nA [parallel coordinates plot](https://en.wikipedia.org/wiki/Parallel_coordinates) that uses \\`window\\` and \\`fold\\` transforms to convert the four dimensions of penguin measurements into normalized coordinates that can be visualized as \\`line\\` marks. The graphic includes an additional layer with custom \\`text\\` mark labels for the parallel axis grid lines. We render the plot as SVG by passing \\`{renderer:'svg'}\\` to the \\`render\\` method.\n"])))}function pi(e,t){var n=e.markLine({strokeWidth:1.5,opacity:.5}).encode(e.color().fieldN("Species").sort("descending"),e.detail().fieldN("index"),e.x().fieldO("key").scale({type:"point",padding:0}).axis({domain:!1,ticks:!1,title:!1,grid:!0,gridColor:"#888",labelAngle:0,labelPadding:8,labelFontWeight:"bold"}),e.y().fieldQ("fraction").axis(null)),i=e.markText({dx:-2,align:"right",baseline:"middle"}).transform(e.groupby("key").aggregate(e.min("value").as("min"),e.max("value").as("max")),e.fold("min","max").as("op","value"),e.groupby("key").window(e.percent_rank("value").as("fraction"))).encode(e.x().fieldN("key"),e.y().fieldQ("fraction").axis(null),e.text().field("value").format(","));return e.layer(n,i).data("data/penguins.json").transform(e.filter('datum["Beak Length (mm)"] != null'),e.window(e.row_number().as("index")),e.fold(["Beak Length (mm)","Beak Depth (mm)","Flipper Length (mm)","Body Mass (g)"]).as("key","value"),e.groupby("key").join(e.min("value").as("min"),e.max("value").as("max")),e.calculate("(datum.value - datum.min) / (datum.max - datum.min)").as("fraction")).width(t).height(300).autosize({type:"fit-x",contains:"padding"}).render({renderer:"svg"})}function hi(e){return e(Ln||(Ln=(0,l.Z)(['<hr/>\n## Stand-Alone Usage in a Web Browser\n\nTo use the Vega-Lite API in the browser outside of Observable, you need to include all the dependencies, set the default configuration, and then register the Vega libraries. Here is some starting code to build from:\n\n~~~html\n<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <script src="https://cdn.jsdelivr.net/npm/vega@5"><\/script>\n    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"><\/script>\n    <script src="https://cdn.jsdelivr.net/npm/vega-lite-api@4"><\/script>\n    <script src="https://cdn.jsdelivr.net/npm/vega-tooltip"><\/script>\n  </head>\n  <body>\n    <div id="view"></div>\n\n    <script>\n      // setup API options\n      const options = {\n        config: {\n          // Vega-Lite default configuration\n        },\n        init: (view) => {\n          // initialize tooltip handler\n          view.tooltip(new vegaTooltip.Handler().call);\n        },\n        view: {\n          // view constructor options\n          // remove the loader if you don\'t want to default to vega-datasets!\n          loader: vega.loader({\n            baseURL: "https://cdn.jsdelivr.net/npm/vega-datasets@2/",\n          }),\n          renderer: "canvas",\n        },\n      };\n\n      // register vega and vega-lite with the API\n      vl.register(vega, vegaLite, options);\n\n      // now you can use the API!\n      vl.markBar({ tooltip: true })\n        .data([\n          { a: "A", b: 28 }, { a: "B", b: 55 }, { a: "C", b: 43 },\n          { a: "D", b: 91 }, { a: "E", b: 81 }, { a: "F", b: 53 },\n          { a: "G", b: 19 }, { a: "H", b: 87 }, { a: "I", b: 52 },\n        ])\n        .encode(\n          vl.x().fieldQ("b"),\n          vl.y().fieldN("a"),\n          vl.tooltip([vl.fieldQ("b"), vl.fieldN("a")])\n        )\n        .render()\n        .then(viewElement => {\n          // render returns a promise to a DOM element containing the chart\n          // viewElement.value contains the Vega View object instance\n          document.getElementById(\'view\').appendChild(viewElement);\n        });\n    <\/script>\n  </body>\n</html>\n\n~~~'])))}function vi(e,t){var n=e.module();return n.variable(t()).define(["md"],ii),n.variable(t()).define(["md"],ri),n.variable(t()).define(["md"],ai),n.variable(t("vl")).define("vl",["require"],oi),n.variable(t()).define(["md"],li),n.variable(t("zip_codes")).define("zip_codes",["md"],si),n.variable(t()).define(["vl","width"],di),n.variable(t("interactive_weather")).define("interactive_weather",["md"],ci),n.variable(t()).define(["vl","width"],fi),n.variable(t("parallel_coordinats")).define("parallel_coordinats",["md"],_i),n.variable(t()).define(["vl","width"],pi),n.variable(t("standalone_use")).define("standalone_use",["md"],hi),n}function mi(e){return e(En||(En=(0,l.Z)(["# Energy usage in different countries"])))}function gi(e){return e(Pn||(Pn=(0,l.Z)(["[Sustainable Energy Without the Hot Air](http://www.inference.org.uk/sustainable/book/tex/sewtha.pdf) contains charts of energy consumption of different countries.  See pages 231 and 105.  See page 381 for the conversion of barrels of oil to kwh.\n\nThis data is sourced from [UNDP Human Development Report, 2007](http://hdr.undp.org/sites/default/files/reports/268/hdr_20072008_en_complete.pdf), see table 23 page  306.  It is based on [Total primary\nenergy supply](https://en.wikipedia.org/wiki/Primary_energy)"])))}function bi(e){return e(In||(In=(0,l.Z)(["https://datacatalog.worldbank.org/energy-use-kg-oil-equivalent-capita-1\nhttps://datacatalog.worldbank.org/total-final-energy-consumption-tfec\n\nNot clear from either measure what it contains -e.g. presumably it doesn't contain energy embodied in imported goods?\n"])))}function wi(e){return e("d3")}function yi(e){return e(zn||(zn=(0,l.Z)(["Data comes from a custom report generated from the World Development Indicators, [here](https://databank.worldbank.org/reports.aspx?source=world-development-indicators#)"])))}function ki(){return"https://gist.githubusercontent.com/RobinL/f9d478dadd70ec2dda67c1e9e91686f1/raw/1d628cb38f3d693052bf6bf5eedcb4126bf34a25/energy_usage.csv"}function xi(e,t){return e.csv(t,e.autoType)}function Zi(e){return e.filter((function(e){return".."!=e["2014 [YR2014]"]}))}function Ai(e){return e.map((function(e){var t={};return t["2014_kg_oil_equiv_per_capita"]=e["2014 [YR2014]"],t.country=e["Country Name"],t.code=e["Country Code"],t}))}function qi(e){return e.map((function(e){return e.kwh_per_day=11.63*e["2014_kg_oil_equiv_per_capita"]/365,{kwh_per_day:e.kwh_per_day,code:e.code,country:e.country}}))}function Si(){return["USA","GBR","CHN","FRA","BRA","IND","AUS"]}function Gi(e,t){return e.filter((function(e){return t.includes(e.code)}))}function Di(e){return JSON.stringify(e)}function ji(e){return e.json("https://red-wave-c29f.robinlinacre.workers.dev/corsproxy/?apiurl=https://api.worldbank.org/countries/USA;GBR;CHN;FRA;BRA;IND;AUS/indicators/EG.USE.PCAP.KG.OE?date=2014%3A2014%26format=json%26per_page=1000")}function Li(e){return e.json("https://red-wave-c29f.robinlinacre.workers.dev/corsproxy/?apiurl=https://api.worldbank.org/countries/USA;GBR;CHN;FRA;BRA;IND;AUS/indicators/1.1_TOTAL.FINAL.ENERGY.CONSUM?date=2014%3A2014%26format=json%26per_page=1000")}function Ei(e){return e.json("https://red-wave-c29f.robinlinacre.workers.dev/corsproxy/?apiurl=https://api.worldbank.org/countries/USA;GBR;CHN;FRA;BRA;IND;AUS/indicators/SP.POP.TOTL?date=2014%3A2014%26format=json%26per_page=1000")}function Pi(e,t){return[0,1,2,3,4,5,6].map((function(n){return{code:e[1][n].country.id,country:e[1][n].country.value,kwh_per_day:1e12*e[1][n].value/(36e5*t[1][n].value)/365.25}}))}function Ii(e){return e[1].map((function(e){return e.kwh_per_day=11.63*e.value/365,{kwh_per_day:e.kwh_per_day,code:e.country.id,country:e.country.value}}))}function zi(e){return e("vega-embed@3")}function Ri(e,t){return e({data:{values:t},mark:"bar",encoding:{x:{field:"country",type:"nominal",sort:{field:"kwh_per_day",op:"mean",order:"descending"}},y:{field:"kwh_per_day",type:"quantitative"}}})}function Ni(e,t){return e({data:{values:t},mark:"bar",encoding:{x:{field:"country",type:"nominal",sort:{field:"kwh_per_day",op:"mean",order:"descending"}},y:{field:"kwh_per_day",type:"quantitative"}}})}function Ti(e,t){var n=e.module();n.variable(t()).define(["md"],mi),n.variable(t()).define(["md"],gi),n.variable(t()).define(["md"],bi),n.variable(t("d3")).define("d3",["require"],wi),n.variable(t()).define(["md"],yi),n.variable(t("url")).define("url",ki),n.variable(t("data")).define("data",["d3","url"],xi),n.variable(t("nonnull_data")).define("nonnull_data",["data"],Zi),n.variable(t("data_by_country")).define("data_by_country",["nonnull_data"],Ai),n.variable(t("data_with_kwh")).define("data_with_kwh",["data_by_country"],qi),n.variable(t("countries")).define("countries",Si),n.variable(t("selected_countries")).define("selected_countries",["data_with_kwh","countries"],Gi),n.variable(t()).define(["selected_countries"],Di),n.variable(t("primary_energy_use_data_pc")).define("primary_energy_use_data_pc",["d3"],ji),n.variable(t("tfec_data")).define("tfec_data",["d3"],Li),n.variable(t("population_data")).define("population_data",["d3"],Ei),n.variable(t("final_energy_use_per_capita_data")).define("final_energy_use_per_capita_data",["tfec_data","population_data"],Pi),n.variable(t("primary_energy_use_per_capita_data")).define("primary_energy_use_per_capita_data",["primary_energy_use_data_pc"],Ii);var i=e.module(vi);return n.import("vl",i),n.variable(t("vega_embed")).define("vega_embed",["require"],zi),n.variable(t("primary_energy_use_per_capita")).define("primary_energy_use_per_capita",["vega_embed","primary_energy_use_per_capita_data"],Ri),n.variable(t("final_energy_use_per_capita")).define("final_energy_use_per_capita",["vega_embed","final_energy_use_per_capita_data"],Ni),n}function Fi(e){return e(Rn||(Rn=(0,l.Z)(["# Energy usage ready reckoner for everyday activities"])))}function Vi(e){return e(Nn||(Nn=(0,l.Z)(["This is a __rough ready reckoner__ to help you understand your personal energy consumption. \n\nI'm sure these estimates could be significantly improved - suggestions gratefully received [here](https://github.com/RobinL/energy_usage/pulls).\n\nFollowing, [David MacKay](https://www.withouthotair.com/c2/page_24.shtml), I standardise everything in kilowatt hours. \n\nYou can find all assumptions and calculations [here](https://github.com/RobinL/energy_usage/tree/master/src), or click on the headers for calculations specific to each activity.\n"])))}function Bi(e){return e(Tn||(Tn=(0,l.Z)(["## Key to graphics"])))}function Ci(e){return e}function Ui(e){return e(Fn||(Fn=(0,l.Z)(["## [Driving](https://github.com/RobinL/energy_usage/blob/master/src/driving.js)"])))}function Oi(e){return e}function Mi(e){return e}function Hi(e){return e(Vn||(Vn=(0,l.Z)(["## [Flying](https://github.com/RobinL/energy_usage/blob/master/src/flying.js)"])))}function Wi(e){return e}function Yi(e){return e}function Qi(e){return e(Bn||(Bn=(0,l.Z)(["## [Heating](https://github.com/RobinL/energy_usage/blob/master/src/heating.js)"])))}function Ki(e){return e}function Ji(e){return e}function Xi(e){return e(Cn||(Cn=(0,l.Z)(["## [Showers/baths](https://github.com/RobinL/energy_usage/blob/master/src/shower.js)"])))}function $i(e){return e}function er(e){return e}function tr(e){return e(Un||(Un=(0,l.Z)(["## [Electricity](https://github.com/RobinL/energy_usage/blob/master/src/electricity.js)"])))}function nr(e){return e}function ir(e){return e}function rr(e){return e(On||(On=(0,l.Z)(["## [Stuff](https://github.com/RobinL/energy_usage/blob/master/src/stuff.js)"])))}function ar(e){return e}function or(e){return e}function ur(e){return e(Mn||(Mn=(0,l.Z)(["## [Eating](https://github.com/RobinL/energy_usage/blob/master/src/eating.js)"])))}function lr(e){return e}function sr(e){return e}function dr(e){return e(Hn||(Hn=(0,l.Z)(["## [Pets](https://github.com/RobinL/energy_usage/blob/master/src/pets.js)"])))}function cr(e){return e}function fr(e){return e}function _r(e){return e(Wn||(Wn=(0,l.Z)(["# Summary"])))}function pr(e,t){return e(t)}function hr(e,t){return e(t)}function vr(e){return e(Yn||(Yn=(0,l.Z)(["Here's another representation of how your energy usage breaks down:"])))}function mr(e,t,n){return e(t,n,!0)}function gr(e){return e(Qn||(Qn=(0,l.Z)(["## How do you compare?"])))}function br(e){return e(Kn||(Kn=(0,l.Z)(["This calculator only considers a subset of your energy usage, so your overall total will actually be higher.  Nonetheless, it's interesting to compare to average per captia energy usage of various countries:"])))}function wr(e){return e(Jn||(Jn=(0,l.Z)(["The following chart shows primary per capita energy usage, converted into kwh.  See [here](https://datacatalog.worldbank.org/energy-use-kg-oil-equivalent-capita-1) for the source of the data.  "])))}function yr(e){return e}function kr(e){return e(Xn||(Xn=(0,l.Z)(['Note that primary energy usage is __not__ equivalent to the end-user consumption tallied in this calculator.\n\n\nIt is [defined as](https://ec.europa.eu/eurostat/statistics-explained/index.php/Glossary:Primary_energy_consumption) "The total energy demand of a country. It covers consumption of the energy sector itself, losses during transformation (for example, from oil or gas into electricity) and distribution of energy, and the final consumption by end users". \n\nI think this means it would count both energy produced domestically and primary energy imports in the form of fuel.  But not energy embodied in imported goods.  It is unclear to me whether it would count jet fuel oil for international flights.'])))}function xr(e){return e($n||($n=(0,l.Z)(["The following chart shows final energy consumption per capita."])))}function Zr(e){return e}function Ar(e){return e(ei||(ei=(0,l.Z)(["## Annex: Imports and Calculations"])))}function qr(e,t,n,i,r,a,o){return e.concat(t,n,i,r,a,o)}function Sr(e){var t={};return e.forEach((function(e){return t[e.name]=e.value})),t}function Gr(e,t){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,u.Z)(d().mark((function e(t,n){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("https://www.google-analytics.com/analytics.js").catch((function(){return window.ga}));case 2:return(i=e.sent)("create","UA-146468274-1","auto"),i("send","pageview",n(ti||(ti=(0,l.Z)(["<a href>"]))).pathname),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jr(e,t){var n=e.module();n.variable(t("title")).define("title",["md"],Fi),n.variable(t("under_title_blurb")).define("under_title_blurb",["md"],Vi),n.variable(t("key_to_graphics_title")).define("key_to_graphics_title",["md"],Bi),n.variable(t("key_to_graphics_text")).define("key_to_graphics_text",["key"],Ci),n.variable(t("driving_title")).define("driving_title",["md"],Ui),n.variable(t("driving_text_output")).define("driving_text_output",["driving_text"],Oi),n.variable(t("driving_chart_output")).define("driving_chart_output",["driving_chart"],Mi),n.variable(t("flying_title")).define("flying_title",["md"],Hi),n.variable(t("flying_text_output")).define("flying_text_output",["flying_text"],Wi),n.variable(t("flying_chart_output")).define("flying_chart_output",["flying_chart"],Yi),n.variable(t("heating_title")).define("heating_title",["md"],Qi),n.variable(t("heating_text_output")).define("heating_text_output",["heating_text"],Ki),n.variable(t("heating_chart_output")).define("heating_chart_output",["heating_chart"],Ji),n.variable(t("showers_baths_title")).define("showers_baths_title",["md"],Xi),n.variable(t("showers_baths_text_output")).define("showers_baths_text_output",["showers_and_baths_text"],$i),n.variable(t("showers_bath_chart_output")).define("showers_bath_chart_output",["showers_bath_chart"],er),n.variable(t("electricity_title")).define("electricity_title",["md"],tr),n.variable(t("electricity_text_output")).define("electricity_text_output",["electricity_text"],nr),n.variable(t("electricity_chart_output")).define("electricity_chart_output",["electricity_chart"],ir),n.variable(t("stuff_title")).define("stuff_title",["md"],rr),n.variable(t("stuff_text_output")).define("stuff_text_output",["stuff_text"],ar),n.variable(t("stuff_chart_output")).define("stuff_chart_output",["stuff_chart"],or),n.variable(t("eating_title")).define("eating_title",["md"],ur),n.variable(t("eating_text_output")).define("eating_text_output",["eating_text"],lr),n.variable(t("eating_chart_output")).define("eating_chart_output",["eating_chart"],sr),n.variable(t("dogs_title")).define("dogs_title",["md"],dr),n.variable(t("dogs_text_output")).define("dogs_text_output",["dogs_text"],cr),n.variable(t("dogs_chart_output")).define("dogs_chart_output",["dogs_chart"],fr),n.variable(t("summary_title")).define("summary_title",["md"],_r),n.variable(t("summary_text_output")).define("summary_text_output",["summary_text","all_data"],pr),n.variable(t("summary_chart_output")).define("summary_chart_output",["unit_chart_2","all_data_dict"],hr),n.variable(t("summary_text_output_2")).define("summary_text_output_2",["md"],vr),n.variable(t("energy_use_treemap")).define("energy_use_treemap",["treemap_chart","all_data","width"],mr),n.variable(t()).define(["md"],gr),n.variable(t("md_notinclude")).define("md_notinclude",["md"],br),n.variable(t()).define(["md"],wr),n.variable(t()).define(["primary_energy_use_per_capita"],yr),n.variable(t()).define(["md"],kr),n.variable(t()).define(["md"],xr),n.variable(t()).define(["final_energy_use_per_capita"],Zr),n.variable(t()).define(["md"],Ar),n.variable(t("all_data")).define("all_data",["driving_data","flying_data","electricity_data","eating_data","dogs_data","heating_gas_data","stuff_data"],qr),n.variable(t("all_data_dict")).define("all_data_dict",["all_data"],Sr);var i=e.module(Ae);n.import("driving_text",i),n.import("driving_conclusion",i),n.import("driving_data",i),n.import("driving_chart",i);var r=e.module(Ne);n.import("flying_text",r),n.import("flying_chart",r),n.import("flying_data",r);var a=e.module(Qe);n.import("electricity_text",a),n.import("electricity_conclusion",a),n.import("electricity_data",a),n.import("electricity_chart",a);var o=e.module(ut);n.import("dogs_text",o),n.import("dogs_conclusion",o),n.import("dogs_data",o),n.import("dogs_chart",o);var u=e.module(St);n.import("eating_text",u),n.import("eating_conclusion",u),n.import("eating_data",u),n.import("eating_chart",u);var l=e.module(Jt);n.import("heating_text",l),n.import("showers_and_baths_text",l),n.import("heating_gas_data",l),n.import("heating_chart",l),n.import("showers_bath_chart",l);var s=e.module(dn);n.import("stuff_text",s),n.import("stuff_conclusion",s),n.import("stuff_data",s),n.import("stuff_chart",s);var d=e.module(xn);n.import("treemap_chart",d),n.import("summary_text",d);var c=e.module(Ti);n.import("primary_energy_use_per_capita",c),n.import("final_energy_use_per_capita",c);var f=e.module(fe);n.import("key",f),n.variable(t("ga")).define("ga",["require","html"],Gr);var _=e.module(fe);return n.import("unit_chart",_),n.import("unit_chart_2",_),n}var Lr=n(2263),Er=n(674);var Pr={title:"Energy usage ready reckoner",post_date:"2019-10-05",code_url:"https://observablehq.com/@robinl/energy-usage-calculator-for-everyday-activities",post_type:"obs",post_category:"energy",description:"Energy usage calculator for everyday activities"},Ir=["title","under_title_blurb","key_to_graphics_title","key_to_graphics_text","driving_title","driving_text_output","driving_chart_output","flying_title","flying_text_output","flying_chart_output","heating_title","heating_text_output","heating_chart_output","showers_baths_title","showers_baths_text_output","showers_bath_chart_output","electricity_title","electricity_text_output","electricity_chart_output","stuff_title","stuff_text_output","stuff_chart_output","showers_title","showers_text_output","showers_chart_output","eating_title","eating_text_output","eating_chart_output","washing_title","washing_text_output","washing_chart_output","dogs_title","dogs_text_output","dogs_chart_output","summary_title","summary_text_output","summary_chart_output","summary_text_output_2","energy_use_treemap"],zr={name:"o0juxb",styles:"input{font-size:0.8em;}"},Rr=function(e){e.data;return(0,Er.tZ)(Lr.Z,{define:jr,output_order:Ir,post_frontmatter:Pr,css:zr})}}}]);
//# sourceMappingURL=component---src-pages-energy-usage-jsx-1e661604c5f07102b35b.js.map