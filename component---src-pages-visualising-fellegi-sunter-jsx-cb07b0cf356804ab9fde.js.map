{"version":3,"sources":["webpack://gatsby-starter-hello-world/./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","webpack://gatsby-starter-hello-world/./src/components/linkage_footer.jsx","webpack://gatsby-starter-hello-world/./src/components/prob_linkage_page.jsx","webpack://gatsby-starter-hello-world/./node_modules/@robinl/visualising-fellegi-sunter/379dba93f4bb9357@1122.js","webpack://gatsby-starter-hello-world/./node_modules/@robinl/visualising-fellegi-sunter/79750b3b8e929d9d@209.js","webpack://gatsby-starter-hello-world/./node_modules/@robinl/visualising-fellegi-sunter/d25176b0fe784ad0@488.js","webpack://gatsby-starter-hello-world/./node_modules/@robinl/visualising-fellegi-sunter/ecf81050a24329e5@163.js","webpack://gatsby-starter-hello-world/./node_modules/@robinl/visualising-fellegi-sunter/060a32b021a09f92@1011.js","webpack://gatsby-starter-hello-world/./src/pages/visualising_fellegi_sunter.jsx"],"names":["_taggedTemplateLiteral","strings","raw","slice","Object","freeze","defineProperties","value","mar","flex","order_of_articles","props","path","current_path","this_index","indexOf","previous_article","next_article","undefined","to","css","post","define","output_order","className","title","post_frontmatter","description","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_1","md","_settings_raw","inputs","default_settings","textarea","rows","_max_depth_1","settings","num_levels","length","range","step","label","_4","_5","plot_treemap","max_depth_1","_plot_treemap","generate_treemap_data","treemap","html","d3","width","DOM","box_html","max_depth","height","data_generated","root","container","tooltip","select","append","attr","style","svg","grouped_data","filter","d","depth","group","node","selectAll","data","join","concat","x0","y0","nodeUid","uid","id","x1","y1","rgb","colour","col","hex","opacity","children","i","nodes","on","event","top","left","this_data","this","datum","b_html","getBoundingClientRect","tt_width","offsetY","layerX","offsetX","visible","console","log","layerY","_add_children_from_column","children_to_add","add_children_from_column","subtree","column","match","forEach","c","items_to_add","_children_to_add","color_match","color_non_match","parent","probabilities","this_colour","prob","name","child","name_list","prob_list","push","_generate_treemap_data","lam","start_template","matches","non_matches","_box_html","format_perc","text","map","k","final_prob","reduce","a","b","contents","innerHTML","_settings","settings_raw","JSON","parse","_styles","_treemap","tile","treemapSquarify","size","paddingOuter","paddingTop","paddingInner","round","hierarchy","sum","sort","_default_settings","_format_perc","format","_colours","scaleOrdinal","schemeCategory10","_color_match","colours","brighter","_color_non_match","_d3","require","_inputs","_21","runtime","observer","main","module","variable","G","_","input","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","_templateObject17","_templateObject18","_templateObject19","_templateObject20","_templateObject21","_templateObject22","_templateObject23","_templateObject24","_templateObject25","_templateObject26","_templateObject27","_templateObject28","_templateObject29","_templateObject30","_templateObject31","_templateObject32","_templateObject33","_templateObject34","_templateObject35","_templateObject36","_templateObject37","_templateObject38","_templateObject39","_templateObject40","_templateObject41","_templateObject42","_templateObject43","_templateObject44","_templateObject45","_templateObject46","_templateObject47","_templateObject48","_templateObject49","_templateObject50","_templateObject51","_templateObject52","_templateObject53","_templateObject54","_templateObject55","_templateObject56","_templateObject57","_templateObject58","_templateObject59","_templateObject60","_templateObject61","_templateObject62","_templateObject63","_templateObject64","_templateObject65","_templateObject66","_templateObject67","_templateObject68","_templateObject69","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","arguments","source","key","getOwnPropertyDescriptors","defineProperty","_2","_aq","_x","_x2","_x3","_x4","_aq2","_callee","aq_version","aq_packages","toView","aq","_context","prev","next","sent","Promise","all","pkg","addPackage","addTableMethod","override","abrupt","stop","_aq_version","_aq_packages","_6","_op","op","_8","_9","_10","_11","_12","_dt","table","_14","_15","dt","derive","month","row_number","diff","Seattle","Chicago","orderby","view","_16","_17","rollup","corr_sf","corr","corr_chi","_18","_19","fold","as","groupby","min","sun","max","avg","average","med","median","skew","_ref","s","mean","stdev","objects","_20","_toView","DEFAULT_NULL","tableStyle","cellStyle","opt","limit","color","columnNames","_loop","td","index","row","maxCellWidth","null","th","toHTML","_records_l","fname","sname","dob","town","_records_r","_df_r","records_r","from","_splink_settings","proportion_of_matches","comparison_columns","col_name","u_probabilities","m_probabilities","case_expression","fname_l","fname_r","sname_l","sname_r","dob_l","dob_r","town_l","town_r","_df_comparison","get_df_comparison","records_l","_7","df_comparison","_df_gammas","get_df_gammas","splink_settings","df_gammas","get_df_e","term_freqs","_get_df_e","get_match_probability","df_e","df","relocate","after","_get_match_probability","prob_to_log2_bf","log2_bf_to_prob","prior_log2_bg","log2_bayes","cc","gamma_col_name","gamma","m","u","l_val","toLowerCase","r_val","tfs","u_l","u_r","u_new","Math","log2","_get_match_probability_components","num_columns","comparison_vector","gamma_symbols","m_values","u_values","m_symbols","u_symbols","bayes_factors","log2_bayes_factors","col_names","match_probability","col_name_escaped","replace","bf","_get_m_u_formula_numbers","get_match_probability_components","toPrecision","lam_m","lam_u","m_tex","u_tex","p","m_part","u_part","_get_m_u_formula_symbols","tex","get_m_u_formula_symbols","_get_comparison_vector_symbols_and_numbers","joined","joined2","get_comparison_vector_symbols_and_numbers","get_m_u_formula_numbers","_get_df_comparison","records_as_dict_l","records_as_dict_r","df_l","df_r","suffix","colname_no_suffix","cols_ordered","_get_df_gammas","col_order","_bayes_factor_to_prob","_log2_bf_to_prob","bayes_factor_to_prob","pow","_prob_to_bayes_factor","_prob_to_log2_bf","prob_to_bayes_factor","_first_name_lookup","csv","autoType","then","csv_file","lookup","firstname","freq","_surname_lookup","surname","_term_freqs","first_name_lookup","surname_lookup","_32","_33","child1","import","_my_interface","rad_value","rad1","radio","u0","u1","m0","m1","form","get_value","gamma_value","querySelector","checked","onclick","oninput","_fname_val","my_interface","fname_val","_sname_val","_dob_val","_town_val","_lam","sname_val","dob_val","town_val","_form_styles","_title","_para_1","texd","_para_2","_para_3","_para_4","_subhead_1","_para_5","nm","_lam_view","$0","_treemap_1","_para_6","_subhead_2","_para_7","_fname_view","_para_8","choice_text","dict_as_md_table_row","get_row_no_gammas","get_m_u_text","get_row","_treemap_2","_para_9","_subhead_3","_para_10","_sname_view","_para_11","_treemap_3","_para_12","_subhead_4","_dob_view","_para_13","_treemap_4","_para_14","_subhead_5","_town_view","_para_15","_treemap_5","_para_16","_annex","_texd","options","displayMode","fleqn","_css_styles","_get_row","values","gamma_name","_get_row_no_gammas","includes","new_object","_dict_as_md_table_row","dict","row1","row2","row3","_additional_styles","styles","_nm","_m","_styles2","form_styles","_get_m_u_text","colname","m_or_u","matches_text","match_or_non_match","gamma_tex","percentage","parseFloat","toFixed","_choice_text","child2","child3","child4","frontmatter","post_date","code_url","post_type","post_category","css_override"],"mappings":"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","file":"component---src-pages-visualising-fellegi-sunter-jsx-cb07b0cf356804ab9fde.js","sourcesContent":["export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}","import React from 'react'\nimport { css } from \"@emotion/core\"\nimport { rhythm } from \"../utils/typography\"\nimport { Link } from \"gatsby\"\n\n\nconst foot = css`\nmargin-left: auto;\n  margin-right: auto;\n  width: 80%;\n  max-width: 640px;\n  `\n\nconst cen = css`\n  text-align: center;\n`\n\nconst mar = css`\n  margin-top: 1rem;\n  margin-bottom: 0.5rem;\n`\n\nconst flex = css`\n\n\n    display: flex;\n    justify-content: space-between;\n\n`\n\nconst order_of_articles = [\n  \"/intro_to_probabilistic_linkage/\",\n  \"/maths_of_fellegi_sunter/\",\n  \"/visualising_fellegi_sunter/\",\n  \"/understanding_match_weights/\",\n  \"/match_weight_dependencies/\",\n  \"/m_u_generator/\",\n]\n\nconst LinkageFooter = (props) => {\n\n  let path = props.current_path\n\n  let this_index = order_of_articles.indexOf(path)\n\n  let previous_article = order_of_articles[this_index - 1]\n  let next_article = order_of_articles[this_index + 1]\n\n  if (previous_article === undefined) {\n    previous_article = <div></div>\n  } else {\n    previous_article = <div><Link to={previous_article}> &lt; Previous article</Link></div>\n  }\n\n  if (next_article === undefined) {\n    next_article = <div></div>\n  } else {\n    next_article = <div><Link to={next_article}> Next article &gt;</Link></div>\n  }\n\n  return (\n    <div>\n      <hr css={mar} />\n      <div css={flex}>\n        {previous_article}\n        <div><Link to=\"/probabilistic_linkage\">Probabilistic linkage home</Link></div>\n        {next_article}\n      </div>\n\n    </div >)\n}\n\nexport default LinkageFooter","import React from 'react'\nimport Layout from \"../layouts/layout\"\nimport LinkageFooter from './linkage_footer'\nimport ObeservableNotebookDiv from \"./observable_div\"\nimport PostFrontMatter from \"./post_frontmatter\"\nimport SEO from \"./seo\"\n\n\nfunction ProbLinkagePage(props) {\n\n\n  // let post\n\n\n  let post = <ObeservableNotebookDiv define={props.define} output_order={props.output_order} />\n\n\n  return (\n    <Layout css={props.className}>\n      <SEO title={props.post_frontmatter.title} description={props.post_frontmatter.description} />\n      <PostFrontMatter post_frontmatter={props.post_frontmatter} />\n      {post}\n      <LinkageFooter current_path={props.current_path}\n      />\n    </Layout>\n  )\n\n}\n\nexport default ProbLinkagePage","import _taggedTemplateLiteral from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;\n\n// https://observablehq.com/@robinl/treemap-for-bayes-intuition@1122\nfunction _1(md) {\n  return md(_templateObject || (_templateObject = _taggedTemplateLiteral([\"# Treemap for Bayes Intuition\"])));\n}\n\nfunction _settings_raw(inputs, default_settings) {\n  return inputs.textarea({\n    value: default_settings,\n    rows: 29\n  });\n}\n\nfunction _max_depth_1(settings, inputs) {\n  var num_levels = settings[\"comparison_columns\"].length;\n  return inputs.range([0, num_levels], {\n    step: 1,\n    label: \"How many columns to take account of?\"\n  });\n}\n\nfunction _4(md) {\n  return md(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"In the following diagram, the outermost rectangle represents the space all pairwise record comparisons.  \\n\\nThis can then be recursively split into subsets, beginning with spliting between record pairs that match and those that do not match, then further splitting these rectangles based on comparisons of the values in columns.\\n\"])));\n}\n\nfunction _5(plot_treemap, settings, max_depth_1) {\n  return plot_treemap(settings, max_depth_1, 600);\n}\n\nfunction _plot_treemap(generate_treemap_data, treemap, html, d3, width, DOM, box_html) {\n  return function (settings, max_depth, height) {\n    var data_generated = generate_treemap_data(settings);\n    var root = treemap(data_generated, height);\n    var container = html(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"<div class=\\\"treemap_container\\\">\"])));\n    var tooltip = d3.select(container).append(\"div\").attr(\"class\", \"svg-tooltip\").style(\"position\", \"absolute\").style(\"display\", \"inline-block\").style(\"visibility\", \"hidden\").attr(\"pointer-events\", \"none\");\n    var svg = d3.select(container).append(\"svg\").attr(\"height\", height).attr(\"width\", width);\n    var grouped_data = d3.filter(root, function (d) {\n      return d.depth <= max_depth + 1;\n    });\n    grouped_data = d3.group(grouped_data, function (d) {\n      return d.height;\n    });\n    var node = svg.selectAll(\"g\").data(grouped_data).join(\"g\").selectAll(\"g\").data(function (d) {\n      return d[1];\n    }).join(\"g\").attr(\"transform\", function (d) {\n      return \"translate(\".concat(d.x0, \",\").concat(d.y0, \")\");\n    });\n    node.append(\"rect\").attr(\"id\", function (d) {\n      return (d.nodeUid = DOM.uid(\"node\")).id;\n    }).attr(\"width\", function (d) {\n      return d.x1 - d.x0;\n    }).attr(\"height\", function (d) {\n      return d.y1 - d.y0;\n    }).attr(\"stroke-width\", \"1px\").attr(\"stroke\", \"black\").attr(\"fill\", function (d) {\n      if (d.depth == max_depth + 1) {\n        return d3.rgb(d.data.colour);\n      } else {\n        var col = d3.rgb(d.data.colour);\n\n        if (col.hex() != \"#ffffff\") {\n          if (d.depth == 1) {\n            col.opacity = 0.3;\n          } else {\n            col.opacity = 0.0;\n          }\n        }\n\n        return col;\n      }\n    });\n    node.append(\"foreignObject\").attr(\"pointer-events\", \"none\").attr(\"width\", function (d) {\n      return d.x1 - d.x0;\n    }).attr(\"height\", function (d) {\n      return d.y1 - d.y0;\n    }).attr(\"xmlns\", \"http://www.w3.org/1999/xhtml\").append(\"xhtml:div\").attr(\"class\", \"wrap-info\").append(\"div\").html(function (d) {\n      return box_html(d, max_depth);\n    });\n    node.filter(function (d) {\n      return d.children;\n    }).selectAll(\"tspan\").attr(\"dx\", 3).attr(\"y\", 13);\n    node.filter(function (d) {\n      return !d.children;\n    }).selectAll(\"tspan\").attr(\"x\", 3).attr(\"y\", function (d, i, nodes) {\n      return \"\".concat((i === nodes.length - 1) * 0.3 + 1.1 + i * 0.9, \"em\");\n    });\n    svg.selectAll(\"rect\").on(\"mouseover\", function (event) {\n      return tooltip.style(\"visibility\", \"visible\");\n    }).on(\"mousemove\", function (event) {\n      var this_data = d3.select(this).datum();\n      var b_html = box_html(this_data, max_depth);\n      tooltip.html(b_html);\n      var top;\n      var left;\n      var tt_height = tooltip.node().getBoundingClientRect().height;\n      var tt_width = tooltip.node().getBoundingClientRect().width;\n      top = event.offsetY + 10 + \"px\";\n\n      if (width - event.layerX > tt_width) {\n        left = event.offsetX + 10 + \"px\";\n      } else {\n        left = event.offsetX - tt_width - 10 + \"px\";\n      }\n\n      var visible = \"visible\";\n\n      if (b_html == \"\") {\n        visible = \"hidden\";\n      }\n\n      return tooltip.style(\"top\", top).style(\"left\", left).style(\"visibility\", visible);\n    }).on(\"click\", function (event) {\n      console.log(\"height: \".concat(height));\n      console.log(\"event.layerY: \".concat(event.layerY));\n    }).on(\"mouseout\", function () {\n      return tooltip.style(\"visibility\", \"hidden\");\n    });\n    return container;\n  };\n}\n\nfunction _add_children_from_column(children_to_add) {\n  return function add_children_from_column(subtree, column, match) {\n    // We want to find all current leaves.\n    if (\"children\" in subtree) {\n      subtree[\"children\"].forEach(function (c) {\n        add_children_from_column(c, column, match);\n      });\n    } // When a leaf is found, add children\n    else {\n        var items_to_add = children_to_add(column, subtree, match);\n        subtree[\"children\"] = items_to_add;\n      }\n\n    delete subtree[\"value\"];\n  };\n}\n\nfunction _children_to_add(color_match, color_non_match, d3) {\n  return function children_to_add(col, parent, match) {\n    var children = [];\n    var probabilities;\n    var this_colour;\n\n    if (match) {\n      probabilities = col[\"m_probabilities\"];\n      this_colour = color_match;\n    } else {\n      probabilities = col[\"u_probabilities\"];\n      this_colour = color_non_match;\n    }\n\n    probabilities.forEach(function (prob, i) {\n      var name = \"gamma_\" + col[\"col_name\"] + \" = \" + i;\n      var child = {\n        name: name,\n        name_list: parent[\"name_list\"].concat(name),\n        value: parent[\"value\"] * prob,\n        prob: prob,\n        prob_list: parent[\"prob_list\"].concat(prob)\n      };\n\n      if (col[\"gamma_value\"] == i && parent[\"colour\"] == this_colour) {\n        child[\"colour\"] = this_colour;\n      } else {\n        child[\"colour\"] = d3.rgb(255, 255, 255);\n      }\n\n      children.push(child);\n    });\n    return children;\n  };\n}\n\nfunction _generate_treemap_data(d3, color_match, color_non_match, add_children_from_column) {\n  return function (settings) {\n    var lam = settings[\"proportion_of_matches\"];\n    var start_template = {\n      name: \"All comparisons\",\n      name_list: [],\n      prob_list: [],\n      prob: 1.0,\n      colour: d3.rgb(255, 255, 255),\n      children: [{\n        name: \"matches\",\n        name_list: [\"match\"],\n        prob_list: [lam],\n        prob: lam,\n        value: lam,\n        colour: color_match\n      }, {\n        name: \"non-match\",\n        name_list: [\"non-match\"],\n        prob_list: [1 - lam],\n        prob: 1 - lam,\n        value: 1 - lam,\n        colour: color_non_match\n      }]\n    };\n    var matches = start_template[\"children\"][0];\n    var non_matches = start_template[\"children\"][1];\n    settings[\"comparison_columns\"].forEach(function (c, i) {\n      add_children_from_column(matches, c, true);\n      add_children_from_column(non_matches, c, false);\n    });\n    return start_template;\n  };\n}\n\nfunction _box_html(format_perc, html) {\n  return function box_html(d, max_depth) {\n    var name_list = d.data.name_list;\n    var prob_list = d.data.prob_list;\n    var zipped = name_list.map(function (k, i) {\n      return [k, prob_list[i]];\n    });\n    var elems = zipped.map(function (d) {\n      return \"<p>\".concat(d[0], \" (\").concat(format_perc(d[1]), \")\");\n    });\n    var text = elems.join(\" and \");\n    var final_prob = prob_list.reduce(function (a, b) {\n      return a * b;\n    }, 1);\n    text = text + \"<p>Proportion of all comparisons: \".concat(format_perc(final_prob));\n    var contents = html(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\", \"\"])), text);\n\n    if (d.depth == max_depth + 1) {\n      return contents.innerHTML;\n    } else {\n      return \"\";\n    }\n  };\n}\n\nfunction _settings(settings_raw) {\n  return JSON.parse(settings_raw);\n}\n\nfunction _styles(html) {\n  return html(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n<style>\\n.wrap-info {\\n  padding: 5px;\\n  font-family: monospace;\\n  font-size: 0.6em;\\n  line-height: 1.3em;\\n}\\n.wrap-info p {\\n  margin-top: 0px;\\n  margin-bottom: 0.1rem;\\n  \\n}\\ntextarea {\\n    max-height: 1000em !important\\n}\\n\\n.svg-tooltip {\\n\\n    background: rgba(69,77,93,.9);\\n    border-radius: .1rem;\\n    color: #fff;\\n    display: inline-block;\\n    max-width: 500px;\\n    padding: .2rem .4rem;\\n    position: absolute;\\n    text-overflow: ellipsis;\\n    white-space: pre;\\n    z-index: 300;\\n    visibility: hidden;\\n  }\\n\\n.svg-tooltip p {\\nfont-family: sans-serif;\\n    padding: 0;\\n    margin: 0.2rem;\\n      font-size: 0.8em;\\n    line-height: 1.0em;\\n  }\\n</style>\"])));\n}\n\nfunction _treemap(d3, width) {\n  return function (data, height) {\n    return d3.treemap().tile(d3.treemapSquarify).size([width, height]).paddingOuter(5).paddingTop(5).paddingInner(5).round(true)(d3.hierarchy(data).sum(function (d) {\n      return d.value;\n    }).sort(function (a, b) {\n      return b.value - a.value;\n    }));\n  };\n}\n\nfunction _default_settings() {\n  return \"{\\n    \\\"proportion_of_matches\\\": 0.4,\\n    \\\"comparison_columns\\\": [\\n        {\\n            \\\"col_name\\\": \\\"fname\\\",\\n            \\\"m_probabilities\\\": [0.25, 0.75],\\n            \\\"u_probabilities\\\": [0.7,  0.3],\\n            \\\"gamma_value\\\": 1\\n        },\\n        {\\n            \\\"col_name\\\": \\\"sname\\\",\\n            \\\"m_probabilities\\\": [0.2, 0.8],\\n            \\\"u_probabilities\\\": [0.8,  0.2],\\n            \\\"gamma_value\\\": 0\\n        },\\n        {\\n            \\\"col_name\\\": \\\"dob\\\",\\n            \\\"m_probabilities\\\": [0.2, 0.8],\\n            \\\"u_probabilities\\\": [0.8,  0.2],\\n            \\\"gamma_value\\\": 1\\n        },\\n        {\\n            \\\"col_name\\\": \\\"town\\\",\\n            \\\"m_probabilities\\\": [0.2, 0.8],\\n            \\\"u_probabilities\\\": [0.8,  0.2],\\n            \\\"gamma_value\\\": 1\\n        }\\n    ]\\n}\";\n}\n\nfunction _format_perc(d3) {\n  return d3.format(\".1%\");\n}\n\nfunction _colours(d3) {\n  return d3.scaleOrdinal(d3.schemeCategory10);\n}\n\nfunction _color_match(d3, colours) {\n  return d3.rgb(colours(2)).brighter(2.5);\n}\n\nfunction _color_non_match(d3, colours) {\n  return d3.rgb(colours(1)).brighter(1.5);\n}\n\nfunction _d3(require) {\n  return require(\"d3@6\");\n}\n\nfunction _inputs(require) {\n  return require(\"@observablehq/inputs\");\n}\n\nfunction _21() {\n  return \"Links:\\n\\nx times more likely: \\nhttps://betterexplained.com/articles/understanding-bayes-theorem-with-ratios/\\nhttps://rss.onlinelibrary.wiley.com/doi/pdf/10.1111/j.1740-9713.2006.00204.x\\n\\nOdds are not quite the same as bayes factors:  https://ocw.mit.edu/courses/mathematics/18-05-introduction-to-probability-and-statistics-spring-2014/readings/MIT18_05S14_Reading12b.pdf\\n\\nhttps://cran.r-project.org/web/packages/BayesFactor/vignettes/odds_probs.html#:~:text=The%20Bayes%20factor%20represents%20the,are%20what%20are%20being%20changed.&text=Further%2C%20these%20odds%20can%20be,models%20sum%20to%20known%20probability.\\nThe Bayes factor represents the relative evidence between two models \\u2013 that is, the change in the model odds due to the data \\u2013 but the odds are what are being changed. \\n\\n\\nhttps://bookdown.org/kevin_davisross/bayesian-reasoning-and-methods/bayes-factor.html\\nRepresenting bayes theorem using bf\\n\\n\";\n}\n\nexport default function define(runtime, observer) {\n  var main = runtime.module();\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"viewof settings_raw\")).define(\"viewof settings_raw\", [\"inputs\", \"default_settings\"], _settings_raw);\n  main.variable(observer(\"settings_raw\")).define(\"settings_raw\", [\"Generators\", \"viewof settings_raw\"], function (G, _) {\n    return G.input(_);\n  });\n  main.variable(observer(\"viewof max_depth_1\")).define(\"viewof max_depth_1\", [\"settings\", \"inputs\"], _max_depth_1);\n  main.variable(observer(\"max_depth_1\")).define(\"max_depth_1\", [\"Generators\", \"viewof max_depth_1\"], function (G, _) {\n    return G.input(_);\n  });\n  main.variable(observer()).define([\"md\"], _4);\n  main.variable(observer()).define([\"plot_treemap\", \"settings\", \"max_depth_1\"], _5);\n  main.variable(observer(\"plot_treemap\")).define(\"plot_treemap\", [\"generate_treemap_data\", \"treemap\", \"html\", \"d3\", \"width\", \"DOM\", \"box_html\"], _plot_treemap);\n  main.variable(observer(\"add_children_from_column\")).define(\"add_children_from_column\", [\"children_to_add\"], _add_children_from_column);\n  main.variable(observer(\"children_to_add\")).define(\"children_to_add\", [\"color_match\", \"color_non_match\", \"d3\"], _children_to_add);\n  main.variable(observer(\"generate_treemap_data\")).define(\"generate_treemap_data\", [\"d3\", \"color_match\", \"color_non_match\", \"add_children_from_column\"], _generate_treemap_data);\n  main.variable(observer(\"box_html\")).define(\"box_html\", [\"format_perc\", \"html\"], _box_html);\n  main.variable(observer(\"settings\")).define(\"settings\", [\"settings_raw\"], _settings);\n  main.variable(observer(\"styles\")).define(\"styles\", [\"html\"], _styles);\n  main.variable(observer(\"treemap\")).define(\"treemap\", [\"d3\", \"width\"], _treemap);\n  main.variable(observer(\"default_settings\")).define(\"default_settings\", _default_settings);\n  main.variable(observer(\"format_perc\")).define(\"format_perc\", [\"d3\"], _format_perc);\n  main.variable(observer(\"colours\")).define(\"colours\", [\"d3\"], _colours);\n  main.variable(observer(\"color_match\")).define(\"color_match\", [\"d3\", \"colours\"], _color_match);\n  main.variable(observer(\"color_non_match\")).define(\"color_non_match\", [\"d3\", \"colours\"], _color_non_match);\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], _d3);\n  main.variable(observer(\"inputs\")).define(\"inputs\", [\"require\"], _inputs);\n  main.variable(observer()).define(_21);\n  return main;\n}","import _defineProperty from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13;\n\nimport _regeneratorRuntime from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// https://observablehq.com/@uwdata/arquero@209\nfunction _1(md) {\n  return md(_templateObject || (_templateObject = _taggedTemplateLiteral([\"# Arquero\\n\\nArquero is a library for query processing and transformation of array-backed data tables. Following the [relational algebra](https://en.wikipedia.org/wiki/Relational_algebra) and inspired by the design of [dplyr](https://dplyr.tidyverse.org/), Arquero provides a fluent API for manipulating column-oriented data frames. Arquero supports a range of data transformation tasks, including filter, sample, aggregation, window, join, and reshaping operations. Arquero is Spanish for \\\"archer\\\": if datasets are [arrows](https://observablehq.com/@theneuralbit/introduction-to-apache-arrow), Arquero helps their aim stay true.\"])));\n}\n\nfunction _2(md) {\n  return md(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"Import Arquero and extend it to print HTML tables in Observable:\"])));\n}\n\nfunction _aq(_x, _x2, _x3, _x4) {\n  return _aq2.apply(this, arguments);\n}\n\nfunction _aq2() {\n  _aq2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(require, aq_version, aq_packages, toView) {\n    var aq;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return require(\"arquero@\".concat(aq_version));\n\n          case 2:\n            aq = _context.sent;\n            _context.next = 5;\n            return Promise.all(aq_packages.map(function (pkg) {\n              return require(pkg);\n            }));\n\n          case 5:\n            _context.sent.forEach(function (pkg) {\n              return aq.addPackage(pkg);\n            });\n\n            // Add HTML table view method to tables\n            aq.addTableMethod('view', toView, {\n              override: true\n            });\n            return _context.abrupt(\"return\", aq);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _aq2.apply(this, arguments);\n}\n\nfunction _aq_version() {\n  return '4.2.0';\n}\n\nfunction _aq_packages() {\n  return [];\n}\n\nfunction _6(md) {\n  return md(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"Export a global reference to Arquero operations:\"])));\n}\n\nfunction _op(aq) {\n  return aq.op;\n}\n\nfunction _8(md) {\n  return md(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"To use the same setup in your own notebooks, add a cell with the following code:\\n~~~ js\\nimport { aq, op } from '@uwdata/arquero'\\n~~~\\n\"])));\n}\n\nfunction _9(md) {\n  return md(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"To get started, see the [Introducing Arquero](https://observablehq.com/@uwdata/introducing-arquero) and [Arquero Cookbook](https://observablehq.com/@uwdata/arquero-cookbook) notebooks.\"])));\n}\n\nfunction _10(md) {\n  return md(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"To use Arquero outside of Observable, see [https://github.com/uwdata/arquero](https://github.com/uwdata/arquero).\"])));\n}\n\nfunction _11(md) {\n  return md(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"<hr>\\n## Examples\\n\\nThe core abstractions in Arquero are *data tables*, which model each column as an array of values, and *verbs* that transform data and return new tables. Verbs are table methods, allowing method chaining for multi-step transformations. Though each table is unique, many verbs reuse the underlying columns to limit duplication.\\n\"])));\n}\n\nfunction _12(md) {\n  return md(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"Average hours of sunshine per month, from [https://usclimatedata.com/](https://usclimatedata.com/):\"])));\n}\n\nfunction _dt(aq) {\n  return aq.table({\n    'Seattle': [69, 108, 178, 207, 253, 268, 312, 281, 221, 142, 72, 52],\n    'Chicago': [135, 136, 187, 215, 281, 311, 318, 283, 226, 193, 113, 106],\n    'San Francisco': [165, 182, 251, 281, 314, 330, 300, 272, 267, 243, 189, 156]\n  });\n}\n\nfunction _14(md) {\n  return md(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"Sorted differences between Seattle and Chicago:\"])));\n}\n\nfunction _15(dt, op) {\n  return dt.derive({\n    month: function month(d) {\n      return op.row_number();\n    },\n    diff: function diff(d) {\n      return d.Seattle - d.Chicago;\n    }\n  }).select('month', 'diff').orderby('month').view({\n    height: 400\n  });\n}\n\nfunction _16(md) {\n  return md(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"Is Seattle more correlated with San Francisco or Chicago?\"])));\n}\n\nfunction _17(dt, op) {\n  return dt.rollup({\n    corr_sf: op.corr('Seattle', 'San Francisco'),\n    corr_chi: op.corr('Seattle', 'Chicago')\n  }).view();\n}\n\nfunction _18(md) {\n  return md(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"Summary statistics per city, as output objects:\"])));\n}\n\nfunction _19(dt, aq, op) {\n  return dt.fold(aq.all(), {\n    as: ['city', 'sun']\n  }).groupby('city').rollup({\n    min: function min(d) {\n      return op.min(d.sun);\n    },\n    // functional form of op.min('sun')\n    max: function max(d) {\n      return op.max(d.sun);\n    },\n    avg: function avg(d) {\n      return op.average(d.sun);\n    },\n    med: function med(d) {\n      return op.median(d.sun);\n    },\n    // functional forms permit flexible table expressions\n    skew: function skew(_ref) {\n      var s = _ref.sun;\n      return (op.mean(s) - op.median(s)) / op.stdev(s) || 0;\n    }\n  }).objects();\n}\n\nfunction _20(md) {\n  return md(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"<hr>\\n## Utilities\\n\"])));\n}\n\nfunction _toView(html) {\n  var DEFAULT_LIMIT = 100;\n\n  var DEFAULT_NULL = function DEFAULT_NULL(value) {\n    return \"<span style=\\\"color: #999;\\\">\".concat(value, \"</span>\");\n  };\n\n  var tableStyle = 'margin: 0; border-collapse: collapse; width: initial;';\n  var cellStyle = 'padding: 1px 5px; white-space: nowrap; overflow-x: hidden; text-overflow: ellipsis; font-variant-numeric: tabular-nums;'; // extend table prototype to provide an HTML table view\n\n  return function (dt) {\n    var opt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    // permit shorthand for limit\n    if (typeof opt === 'number') opt = {\n      limit: opt\n    }; // marshal cell color options\n\n    var color = _objectSpread({}, opt.color);\n\n    if (typeof opt.color === 'function') {\n      // if function, apply to all columns\n      dt.columnNames().forEach(function (name) {\n        return color[name] = opt.color;\n      });\n    } else {\n      var _loop = function _loop(key) {\n        var value = color[key];\n        color[key] = typeof value === 'function' ? value : function () {\n          return value;\n        };\n      };\n\n      // otherwise, gather per-column color options\n      for (var key in color) {\n        _loop(key);\n      }\n    } // marshal CSS styles as toHTML() options\n\n\n    var table = \"\".concat(tableStyle);\n\n    var td = function td(name, index, row) {\n      return \"\".concat(cellStyle, \" max-width: \").concat(+opt.maxCellWidth || 300, \"px;\") + (color[name] ? \" background-color: \".concat(color[name](index, row), \";\") : '');\n    };\n\n    opt = _objectSpread(_objectSpread({\n      limit: DEFAULT_LIMIT,\n      null: DEFAULT_NULL\n    }, opt), {}, {\n      style: {\n        table: table,\n        td: td,\n        th: td\n      }\n    }); // return container div, bind table value to support viewof operator\n\n    var size = \"max-height: \".concat(+opt.height || 270, \"px\");\n    var style = \"\".concat(size, \"; overflow-x: auto; overflow-y: auto;\");\n    var view = html(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"<div style=\\\"\", \"\\\">\", \"</div>\"])), style, dt.toHTML(opt));\n    view.value = dt;\n    return view;\n  };\n}\n\nexport default function define(runtime, observer) {\n  var main = runtime.module();\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer()).define([\"md\"], _2);\n  main.variable(observer(\"aq\")).define(\"aq\", [\"require\", \"aq_version\", \"aq_packages\", \"toView\"], _aq);\n  main.variable(observer(\"aq_version\")).define(\"aq_version\", _aq_version);\n  main.variable(observer(\"aq_packages\")).define(\"aq_packages\", _aq_packages);\n  main.variable(observer()).define([\"md\"], _6);\n  main.variable(observer(\"op\")).define(\"op\", [\"aq\"], _op);\n  main.variable(observer()).define([\"md\"], _8);\n  main.variable(observer()).define([\"md\"], _9);\n  main.variable(observer()).define([\"md\"], _10);\n  main.variable(observer()).define([\"md\"], _11);\n  main.variable(observer()).define([\"md\"], _12);\n  main.variable(observer(\"dt\")).define(\"dt\", [\"aq\"], _dt);\n  main.variable(observer()).define([\"md\"], _14);\n  main.variable(observer()).define([\"dt\", \"op\"], _15);\n  main.variable(observer()).define([\"md\"], _16);\n  main.variable(observer()).define([\"dt\", \"op\"], _17);\n  main.variable(observer()).define([\"md\"], _18);\n  main.variable(observer()).define([\"dt\", \"aq\", \"op\"], _19);\n  main.variable(observer()).define([\"md\"], _20);\n  main.variable(observer(\"toView\")).define(\"toView\", [\"html\"], _toView);\n  return main;\n}","import _taggedTemplateLiteral from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;\n\nimport define1 from \"./79750b3b8e929d9d@209.js\";\n\nfunction _1(md) {\n  return md(_templateObject || (_templateObject = _taggedTemplateLiteral([\"# Fellegi Sunter utils\"])));\n}\n\nfunction _records_l() {\n  return [{\n    uid: \"1_l\",\n    fname: \"John\",\n    sname: \"Smith\",\n    dob: \"1989-03-02\",\n    town: \"Bristol\"\n  }, {\n    uid: \"2_l\",\n    fname: \"Tom\",\n    sname: \"Hanks\",\n    dob: \"1956-07-09\",\n    town: \"Concord\"\n  }, {\n    uid: \"3_l\",\n    fname: \"David\",\n    sname: \"Smith\",\n    dob: \"1981-08-21\",\n    town: \"London\"\n  }];\n}\n\nfunction _records_r() {\n  return [{\n    uid: \"1_r\",\n    fname: \"Jonathan\",\n    sname: \"Smith\",\n    dob: \"1989-03-02\",\n    town: \"Bristol\"\n  }, {\n    uid: \"2_r\",\n    fname: \"David\",\n    sname: \"Smith\",\n    dob: \"1981-08-21\",\n    town: \"Peckham\"\n  }];\n}\n\nfunction _df_r(aq, records_r) {\n  return aq.from(records_r);\n}\n\nfunction _splink_settings() {\n  return {\n    proportion_of_matches: 1 / 100,\n    comparison_columns: [{\n      num_levels: 3,\n      col_name: \"fname\",\n      u_probabilities: [0.8, 0.2],\n      m_probabilities: [0.2, 0.8],\n      case_expression: function case_expression(row) {\n        if (row.fname_l == row.fname_r) {\n          return 1;\n        } else {\n          return 0;\n        }\n      }\n    }, {\n      num_levels: 3,\n      col_name: \"sname\",\n      u_probabilities: [0.9, 0.1],\n      m_probabilities: [0.2, 0.8],\n      case_expression: function case_expression(row) {\n        if (row.sname_l == row.sname_r) {\n          return 1;\n        } else {\n          return 0;\n        }\n      }\n    }, {\n      col_name: \"dob\",\n      u_probabilities: [0.99, 0.01],\n      m_probabilities: [0.2, 0.8],\n      case_expression: function case_expression(row) {\n        if (row.dob_l == row.dob_r) {\n          return 1;\n        } else {\n          return 0;\n        }\n      }\n    }, {\n      col_name: \"town\",\n      u_probabilities: [0.7, 0.3],\n      m_probabilities: [0.3, 0.7],\n      case_expression: function case_expression(row) {\n        if (row.town_l == row.town_r) {\n          return 1;\n        } else {\n          return 0;\n        }\n      }\n    }]\n  };\n}\n\nfunction _df_comparison(get_df_comparison, records_l, records_r) {\n  return get_df_comparison(records_l, records_r);\n}\n\nfunction _7(df_comparison) {\n  return df_comparison.view();\n}\n\nfunction _df_gammas(get_df_gammas, df_comparison, splink_settings) {\n  return get_df_gammas(df_comparison, splink_settings);\n}\n\nfunction _9(df_gammas) {\n  return df_gammas.view();\n}\n\nfunction _10(get_df_e, df_gammas, splink_settings, term_freqs) {\n  return get_df_e(df_gammas, splink_settings, term_freqs).view();\n}\n\nfunction _get_df_e(get_match_probability, aq) {\n  return function get_df_e(df_gammas, splink_settings) {\n    var term_freqs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var df_e = df_gammas.objects().map(function (row) {\n      row[\"match_probability\"] = get_match_probability(row, splink_settings, term_freqs);\n      return row;\n    });\n    var df = aq.from(df_e);\n    df = df.relocate([\"match_probability\"], {\n      after: \"uid_r\"\n    });\n    return df;\n  };\n}\n\nfunction _get_match_probability(prob_to_log2_bf, log2_bf_to_prob) {\n  return function (row, settings) {\n    var term_freqs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var comparison_columns = settings.comparison_columns;\n    var prior_log2_bg = prob_to_log2_bf(settings.proportion_of_matches);\n    var log2_bayes = comparison_columns.reduce(function (a, cc) {\n      var gamma_col_name = \"_\" + cc.col_name;\n      var gamma = row[gamma_col_name]; // gamma = -1 means one side of the comparison is null\n\n      if (gamma == -1) {\n        return a;\n      }\n\n      var m = cc[\"m_probabilities\"][gamma];\n      var u = cc[\"u_probabilities\"][gamma]; // If TF lookup provided, attempt to use to overwrite u\n\n      var l_val = row[cc.col_name + \"_l\"].toLowerCase();\n      var r_val = row[cc.col_name + \"_r\"].toLowerCase();\n\n      if (l_val == r_val) {\n        if (cc.col_name in term_freqs) {\n          var tfs = term_freqs[cc.col_name];\n          var u_l = tfs[l_val] || 0;\n          var u_r = tfs[r_val] || 0;\n          var u_new = Math.max(u_l, u_r);\n\n          if (u_new > 0) {\n            u = u_new;\n          }\n        }\n      }\n\n      return a + Math.log2(m / u);\n    }, prior_log2_bg);\n    return log2_bf_to_prob(log2_bayes);\n  };\n}\n\nfunction _get_match_probability_components(prob_to_log2_bf, log2_bf_to_prob) {\n  return function (row, settings, num_columns) {\n    if (num_columns == undefined) {\n      num_columns = settings.comparison_columns.length;\n    }\n\n    var comparison_columns = settings.comparison_columns.slice(0, num_columns);\n    var prior_log2_bg = prob_to_log2_bf(settings.proportion_of_matches);\n    var d = {\n      comparison_vector: [],\n      gamma_symbols: [],\n      m_values: [],\n      u_values: [],\n      m_symbols: [],\n      u_symbols: [],\n      bayes_factors: [],\n      log2_bayes_factors: [],\n      col_names: [],\n      match_probability: null,\n      lam: settings.proportion_of_matches\n    };\n    comparison_columns.forEach(function (cc) {\n      var col_name = \"_\" + cc.col_name;\n      var gamma = row[col_name];\n      var m = cc[\"m_probabilities\"][gamma];\n      var u = cc[\"u_probabilities\"][gamma];\n      var col_name_escaped = cc.col_name.replace(\"_\", \"\\\\_\");\n      d[\"comparison_vector\"].push(gamma);\n      d[\"gamma_symbols\"].push(\"\\\\gamma_\\\\text{\".concat(col_name_escaped, \"}\"));\n      d[\"col_names\"].push(col_name);\n      d[\"m_values\"].push(m);\n      d[\"m_symbols\"].push(\"m_{\\\\text{\".concat(col_name_escaped, \"},\").concat(gamma, \"}\"));\n      d[\"u_values\"].push(u);\n      d[\"u_symbols\"].push(\"u_{\\\\text{\".concat(col_name_escaped, \"},\").concat(gamma, \"}\"));\n      d[\"bayes_factors\"].push(m / u);\n      d[\"log2_bayes_factors\"].push(Math.log2(m / u));\n    });\n    var log2_bayes = d[\"log2_bayes_factors\"].reduce(function (a, bf) {\n      return a + bf;\n    }, prior_log2_bg);\n    d[\"match_probability\"] = log2_bf_to_prob(log2_bayes);\n    var lam = settings.proportion_of_matches;\n    d[\"size_of_match_portion\"] = lam * d[\"m_values\"].reduce(function (a, b) {\n      return a * b;\n    }, 1);\n    d[\"size_of_non_match_portion\"] = (1 - lam) * d[\"u_values\"].reduce(function (a, b) {\n      return a * b;\n    }, 1);\n    return d;\n  };\n}\n\nfunction _get_m_u_formula_numbers(get_match_probability_components) {\n  return function (row, settings, num_columns) {\n    var d = get_match_probability_components(row, settings, num_columns);\n    var m = d[\"m_values\"].map(function (d) {\n      return d.toPrecision(3);\n    });\n    var u = d[\"u_values\"].map(function (d) {\n      return d.toPrecision(3);\n    });\n    var lam = d[\"lam\"].toPrecision(3);\n    var lam_m = [lam].concat(m);\n    var lam_u = [\"(1 - \".concat(lam, \")\")].concat(u);\n    var m_tex = lam_m.join(\" \\\\times \");\n    var u_tex = lam_u.join(\" \\\\times \");\n    var p = d[\"match_probability\"].toPrecision(3);\n    var m_part = d[\"size_of_match_portion\"].toPrecision(3);\n    var u_part = d[\"size_of_non_match_portion\"].toPrecision(3);\n    return \"\\\\frac{\".concat(m_tex, \"}{(\").concat(m_tex, \") + (\").concat(u_tex, \")}  \\\\newline[10pt] = \\\\frac{\").concat(m_part, \"}{\").concat(m_part, \" + \").concat(u_part, \"}  \\\\newline[10pt] = \").concat(p);\n  };\n}\n\nfunction _get_m_u_formula_symbols(get_match_probability_components) {\n  return function (row, settings) {\n    var d = get_match_probability_components(row, settings);\n    var m = d[\"m_symbols\"];\n    var u = d[\"u_symbols\"];\n    var lam = d[\"lam\"];\n    var lam_m = [\"\\\\lambda\"].concat(m);\n    var lam_u = [\"(1 - \\\\lambda)\"].concat(u);\n    var m_tex = lam_m.join(\" \");\n    var u_tex = lam_u.join(\" \");\n    return \"\\\\frac{\".concat(m_tex, \"}{\").concat(m_tex, \") + \").concat(u_tex, \"}\");\n  };\n}\n\nfunction _16(tex, get_m_u_formula_symbols, df_gammas, splink_settings) {\n  return tex(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\", \"\\n\"])), get_m_u_formula_symbols(df_gammas.objects()[0], splink_settings));\n}\n\nfunction _get_comparison_vector_symbols_and_numbers(get_match_probability_components) {\n  return function (row, settings, num_columns) {\n    var d = get_match_probability_components(row, settings, num_columns);\n    var joined = d[\"gamma_symbols\"].join(\", \");\n    var joined2 = d[\"comparison_vector\"].join(\", \");\n    return \"\\\\bm{\\\\gamma} = [\".concat(joined, \"]= [\").concat(joined2, \"]\");\n  };\n}\n\nfunction _18(tex, get_comparison_vector_symbols_and_numbers, df_gammas, splink_settings) {\n  return tex(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\", \"\\n\"])), get_comparison_vector_symbols_and_numbers(df_gammas.objects()[0], splink_settings));\n}\n\nfunction _19(tex) {\n  return tex(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\bm{gamma} = [gamma_\\text{fname}, gamma_\\text{sname}]\"], [\"\\\\bm{\\\\gamma} = [\\\\gamma_\\\\text{fname}, \\\\gamma_\\\\text{sname}]\"])));\n}\n\nfunction _20(tex, get_m_u_formula_numbers, df_gammas, splink_settings) {\n  return tex(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\", \"\"])), get_m_u_formula_numbers(df_gammas.objects()[0], splink_settings));\n}\n\nfunction _21(get_match_probability_components, df_gammas, splink_settings) {\n  return get_match_probability_components(df_gammas.objects()[0], splink_settings);\n}\n\nfunction _get_df_comparison(aq) {\n  return function (records_as_dict_l, records_as_dict_r) {\n    var df_l = aq.from(records_as_dict_l);\n    var df_r = aq.from(records_as_dict_r);\n    var df_comparison = df_l.join(df_r, function (a, b) {\n      return true;\n    }, null, {\n      suffix: [\"_l\", \"_r\"]\n    }); // Group columns\n\n    var colname_no_suffix = df_l.columnNames();\n    var cols_ordered = [];\n    colname_no_suffix.forEach(function (d) {\n      cols_ordered.push(d + \"_l\");\n      cols_ordered.push(d + \"_r\");\n    });\n    df_comparison = df_comparison.select(cols_ordered);\n    return df_comparison;\n  };\n}\n\nfunction _get_df_gammas(aq) {\n  return function get_df_gammas(df_comparison, splink_settings) {\n    var comparison_columns = splink_settings[\"comparison_columns\"]; // let df_gammas = df_comparison;\n    // let derivation = {};\n    // comparison_columns.forEach(function (cc) {\n    //   derivation[\"_\" + cc.col_name] = cc.case_expression;\n    // });\n    // df_gammas = df_gammas.derive(derivation);\n    // Since we want function calls like double metaphone in our comparison columns, we need to\n    // roundtrip from aq -> object -> aq\n\n    var df_gammas = df_comparison.objects();\n    comparison_columns.forEach(function (cc) {\n      df_gammas.forEach(function (row) {\n        row[\"_\" + cc.col_name] = cc.case_expression(row);\n      });\n    });\n    df_gammas = aq.from(df_gammas); // Put columns in order\n\n    var col_order = [\"uid_l\", \"uid_r\"];\n    comparison_columns.forEach(function (cc) {\n      col_order.push(cc.col_name + \"_l\");\n      col_order.push(cc.col_name + \"_r\");\n      col_order.push(\"_\" + cc.col_name);\n    });\n    df_gammas = df_gammas.select(col_order);\n    return df_gammas;\n  };\n}\n\nfunction _bayes_factor_to_prob() {\n  return function bayes_factor_to_prob(b) {\n    return b / (b + 1);\n  };\n}\n\nfunction _log2_bf_to_prob(bayes_factor_to_prob) {\n  return function log2_bf_to_prob(b) {\n    return bayes_factor_to_prob(Math.pow(2, b));\n  };\n}\n\nfunction _prob_to_bayes_factor() {\n  return function prob_to_bayes_factor(p) {\n    return p / (1 - p);\n  };\n}\n\nfunction _prob_to_log2_bf(prob_to_bayes_factor) {\n  return function prob_to_log2_bf(p) {\n    return Math.log2(prob_to_bayes_factor(p));\n  };\n}\n\nfunction _first_name_lookup(d3) {\n  return d3.csv(\"https://gist.githubusercontent.com/RobinL/0ee2e59db8cbecc105942fe4b101e847/raw/110e5bb3b574b7584b5452d4accfcfad71f2b19d/first_name_noyear.csv\", d3.autoType).then(function (csv_file) {\n    var lookup = {};\n    csv_file.forEach(function (row) {\n      lookup[row.firstname] = row.freq;\n    });\n    return lookup;\n  });\n}\n\nfunction _surname_lookup(d3) {\n  return d3.csv(\"https://gist.githubusercontent.com/RobinL/0ee2e59db8cbecc105942fe4b101e847/raw/110e5bb3b574b7584b5452d4accfcfad71f2b19d/last_name.csv\", d3.autoType).then(function (csv_file) {\n    var lookup = {};\n    csv_file.forEach(function (row) {\n      lookup[row.surname] = row.freq;\n    });\n    return lookup;\n  });\n}\n\nfunction _term_freqs(first_name_lookup, surname_lookup) {\n  return {\n    fname: first_name_lookup,\n    sname: surname_lookup\n  };\n}\n\nfunction _32(term_freqs) {\n  return term_freqs.fname[\"joshua\"];\n}\n\nfunction _33(term_freqs) {\n  return term_freqs.sname[\"linacre\"];\n}\n\nexport default function define(runtime, observer) {\n  var main = runtime.module();\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"records_l\")).define(\"records_l\", _records_l);\n  main.variable(observer(\"records_r\")).define(\"records_r\", _records_r);\n  main.variable(observer(\"df_r\")).define(\"df_r\", [\"aq\", \"records_r\"], _df_r);\n  main.variable(observer(\"splink_settings\")).define(\"splink_settings\", _splink_settings);\n  main.variable(observer(\"df_comparison\")).define(\"df_comparison\", [\"get_df_comparison\", \"records_l\", \"records_r\"], _df_comparison);\n  main.variable(observer()).define([\"df_comparison\"], _7);\n  main.variable(observer(\"df_gammas\")).define(\"df_gammas\", [\"get_df_gammas\", \"df_comparison\", \"splink_settings\"], _df_gammas);\n  main.variable(observer()).define([\"df_gammas\"], _9);\n  main.variable(observer()).define([\"get_df_e\", \"df_gammas\", \"splink_settings\", \"term_freqs\"], _10);\n  main.variable(observer(\"get_df_e\")).define(\"get_df_e\", [\"get_match_probability\", \"aq\"], _get_df_e);\n  main.variable(observer(\"get_match_probability\")).define(\"get_match_probability\", [\"prob_to_log2_bf\", \"log2_bf_to_prob\"], _get_match_probability);\n  main.variable(observer(\"get_match_probability_components\")).define(\"get_match_probability_components\", [\"prob_to_log2_bf\", \"log2_bf_to_prob\"], _get_match_probability_components);\n  main.variable(observer(\"get_m_u_formula_numbers\")).define(\"get_m_u_formula_numbers\", [\"get_match_probability_components\"], _get_m_u_formula_numbers);\n  main.variable(observer(\"get_m_u_formula_symbols\")).define(\"get_m_u_formula_symbols\", [\"get_match_probability_components\"], _get_m_u_formula_symbols);\n  main.variable(observer()).define([\"tex\", \"get_m_u_formula_symbols\", \"df_gammas\", \"splink_settings\"], _16);\n  main.variable(observer(\"get_comparison_vector_symbols_and_numbers\")).define(\"get_comparison_vector_symbols_and_numbers\", [\"get_match_probability_components\"], _get_comparison_vector_symbols_and_numbers);\n  main.variable(observer()).define([\"tex\", \"get_comparison_vector_symbols_and_numbers\", \"df_gammas\", \"splink_settings\"], _18);\n  main.variable(observer()).define([\"tex\"], _19);\n  main.variable(observer()).define([\"tex\", \"get_m_u_formula_numbers\", \"df_gammas\", \"splink_settings\"], _20);\n  main.variable(observer()).define([\"get_match_probability_components\", \"df_gammas\", \"splink_settings\"], _21);\n  main.variable(observer(\"get_df_comparison\")).define(\"get_df_comparison\", [\"aq\"], _get_df_comparison);\n  main.variable(observer(\"get_df_gammas\")).define(\"get_df_gammas\", [\"aq\"], _get_df_gammas);\n  main.variable(observer(\"bayes_factor_to_prob\")).define(\"bayes_factor_to_prob\", _bayes_factor_to_prob);\n  main.variable(observer(\"log2_bf_to_prob\")).define(\"log2_bf_to_prob\", [\"bayes_factor_to_prob\"], _log2_bf_to_prob);\n  main.variable(observer(\"prob_to_bayes_factor\")).define(\"prob_to_bayes_factor\", _prob_to_bayes_factor);\n  main.variable(observer(\"prob_to_log2_bf\")).define(\"prob_to_log2_bf\", [\"prob_to_bayes_factor\"], _prob_to_log2_bf);\n  var child1 = runtime.module(define1);\n  main.import(\"aq\", child1);\n  main.import(\"op\", child1);\n  main.variable(observer(\"first_name_lookup\")).define(\"first_name_lookup\", [\"d3\"], _first_name_lookup);\n  main.variable(observer(\"surname_lookup\")).define(\"surname_lookup\", [\"d3\"], _surname_lookup);\n  main.variable(observer(\"term_freqs\")).define(\"term_freqs\", [\"first_name_lookup\", \"surname_lookup\"], _term_freqs);\n  main.variable(observer()).define([\"term_freqs\"], _32);\n  main.variable(observer()).define([\"term_freqs\"], _33);\n  return main;\n}","import _taggedTemplateLiteral from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8;\n\nfunction _1(md) {\n  return md(_templateObject || (_templateObject = _taggedTemplateLiteral([\"# Fellegi-Sunter visualisation interface\"])));\n}\n\nfunction _my_interface(inputs, tex, html) {\n  return function my_interface(col) {\n    var rad_value = col[\"gamma_value\"] == 1 ? \"match\" : \"mismatch\";\n    var rad1 = inputs.radio([\"match\", \"mismatch\"], {\n      label: \"Comparison of \".concat(col[\"col_name\"], \" is a:\"),\n      value: rad_value\n    });\n    var u0 = inputs.range([0, 1], {\n      label: tex(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"u_\\text{\", \",level_0}\"], [\"u_\\\\text{\", \",level\\\\_0}\"])), col[\"col_name\"]),\n      value: col[\"u_probabilities\"][0]\n    });\n    var u1 = inputs.range([0, 1], {\n      label: tex(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"u_\\text{\", \",level_1}\"], [\"u_\\\\text{\", \",level\\\\_1}\"])), col[\"col_name\"]),\n      value: col[\"u_probabilities\"][1]\n    });\n    var m0 = inputs.range([0, 1], {\n      label: tex(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"m_\\text{\", \",level_0}\"], [\"m_\\\\text{\", \",level\\\\_0}\"])), col[\"col_name\"]),\n      value: col[\"m_probabilities\"][0]\n    });\n    var m1 = inputs.range([0, 1], {\n      label: tex(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"m_\\text{\", \",level_1}\"], [\"m_\\\\text{\", \",level\\\\_1}\"])), col[\"col_name\"]),\n      value: col[\"m_probabilities\"][1]\n    });\n    var form = html(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n    <h4>Choose value and parameters for \", \"</h4>\\n    \", \"\\n    <div class=\\\"container\\\">\\n      <div class=\\\"item-0\\\">\", \"\", \"</div>\\n      <div class=\\\"item-1\\\">\", \"\", \"</div>\\n    </div>\\n  \"])), col[\"col_name\"], rad1, u0, m0, u1, m1);\n\n    var get_value = function get_value() {\n      return {\n        col_name: col[\"col_name\"],\n        gamma_value: rad1.querySelector(\"input\").checked ? 1 : 0,\n        u_probabilities: [u0.value, u1.value],\n        m_probabilities: [m0.value, m1.value]\n      };\n    };\n\n    rad1.onclick = function () {\n      // form.dispatchEvent(new CustomEvent(\"input\"));\n      console.log(rad1.value);\n      form.value = get_value();\n    };\n\n    u0.oninput = function () {\n      u1.value = 1.0 - u0.value;\n      form.value = get_value(); // form.dispatchEvent(new CustomEvent(\"input\"));\n    };\n\n    u1.oninput = function () {\n      u0.value = 1.0 - u1.value;\n      form.value = get_value(); // form.dispatchEvent(new CustomEvent(\"input\"));\n    };\n\n    m0.oninput = function () {\n      m1.value = 1.0 - m0.value;\n      form.value = get_value(); // form.dispatchEvent(new CustomEvent(\"input\"));\n    };\n\n    m1.oninput = function () {\n      m0.value = 1.0 - m1.value;\n      form.value = get_value(); // form.dispatchEvent(new CustomEvent(\"input\"));\n    };\n\n    form.value = get_value();\n    return form;\n  };\n}\n\nfunction _fname_val(my_interface) {\n  return my_interface({\n    col_name: \"fname\",\n    gamma_value: 1,\n    m_probabilities: [0.3, 0.7],\n    u_probabilities: [0.75, 0.25]\n  });\n}\n\nfunction _4(fname_val) {\n  return fname_val;\n}\n\nfunction _sname_val(my_interface) {\n  return my_interface({\n    col_name: \"sname\",\n    gamma_value: 0,\n    m_probabilities: [0.2, 0.8],\n    u_probabilities: [0.85, 0.15]\n  });\n}\n\nfunction _dob_val(my_interface) {\n  return my_interface({\n    col_name: \"dob\",\n    gamma_value: 1,\n    m_probabilities: [0.2, 0.8],\n    u_probabilities: [0.8, 0.2]\n  });\n}\n\nfunction _town_val(my_interface) {\n  return my_interface({\n    col_name: \"town\",\n    gamma_value: 1,\n    m_probabilities: [0.3, 0.7],\n    u_probabilities: [0.9, 0.1]\n  });\n}\n\nfunction _lam(inputs, tex) {\n  return inputs.range([0, 1], {\n    label: tex(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"lambda\"], [\"\\\\lambda\"]))),\n    value: 0.3\n  });\n}\n\nfunction _splink_settings(lam, fname_val, sname_val, dob_val, town_val) {\n  return {\n    proportion_of_matches: lam,\n    comparison_columns: [fname_val, sname_val, dob_val, town_val]\n  };\n}\n\nfunction _form_styles(html) {\n  return html(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"<style>.container {\\n  display: flex;\\nflex-wrap: wrap;\\n  gap: 12px;\\n}\\n</style>\\n\"])));\n}\n\nfunction _inputs(require) {\n  return require(\"@observablehq/inputs\");\n}\n\nexport default function define(runtime, observer) {\n  var main = runtime.module();\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"my_interface\")).define(\"my_interface\", [\"inputs\", \"tex\", \"html\"], _my_interface);\n  main.variable(observer(\"viewof fname_val\")).define(\"viewof fname_val\", [\"my_interface\"], _fname_val);\n  main.variable(observer(\"fname_val\")).define(\"fname_val\", [\"Generators\", \"viewof fname_val\"], function (G, _) {\n    return G.input(_);\n  });\n  main.variable(observer()).define([\"fname_val\"], _4);\n  main.variable(observer(\"viewof sname_val\")).define(\"viewof sname_val\", [\"my_interface\"], _sname_val);\n  main.variable(observer(\"sname_val\")).define(\"sname_val\", [\"Generators\", \"viewof sname_val\"], function (G, _) {\n    return G.input(_);\n  });\n  main.variable(observer(\"viewof dob_val\")).define(\"viewof dob_val\", [\"my_interface\"], _dob_val);\n  main.variable(observer(\"dob_val\")).define(\"dob_val\", [\"Generators\", \"viewof dob_val\"], function (G, _) {\n    return G.input(_);\n  });\n  main.variable(observer(\"viewof town_val\")).define(\"viewof town_val\", [\"my_interface\"], _town_val);\n  main.variable(observer(\"town_val\")).define(\"town_val\", [\"Generators\", \"viewof town_val\"], function (G, _) {\n    return G.input(_);\n  });\n  main.variable(observer(\"viewof lam\")).define(\"viewof lam\", [\"inputs\", \"tex\"], _lam);\n  main.variable(observer(\"lam\")).define(\"lam\", [\"Generators\", \"viewof lam\"], function (G, _) {\n    return G.input(_);\n  });\n  main.variable(observer(\"splink_settings\")).define(\"splink_settings\", [\"lam\", \"fname_val\", \"sname_val\", \"dob_val\", \"town_val\"], _splink_settings);\n  main.variable(observer(\"form_styles\")).define(\"form_styles\", [\"html\"], _form_styles);\n  main.variable(observer(\"inputs\")).define(\"inputs\", [\"require\"], _inputs);\n  return main;\n}","import _defineProperty from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"/home/runner/work/robinl.github.io/robinl.github.io/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18, _templateObject19, _templateObject20, _templateObject21, _templateObject22, _templateObject23, _templateObject24, _templateObject25, _templateObject26, _templateObject27, _templateObject28, _templateObject29, _templateObject30, _templateObject31, _templateObject32, _templateObject33, _templateObject34, _templateObject35, _templateObject36, _templateObject37, _templateObject38, _templateObject39, _templateObject40, _templateObject41, _templateObject42, _templateObject43, _templateObject44, _templateObject45, _templateObject46, _templateObject47, _templateObject48, _templateObject49, _templateObject50, _templateObject51, _templateObject52, _templateObject53, _templateObject54, _templateObject55, _templateObject56, _templateObject57, _templateObject58, _templateObject59, _templateObject60, _templateObject61, _templateObject62, _templateObject63, _templateObject64, _templateObject65, _templateObject66, _templateObject67, _templateObject68, _templateObject69;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// https://observablehq.com/@robinl/visualising-fellegi-sunter@1011\nimport define1 from \"./379dba93f4bb9357@1122.js\";\nimport define2 from \"./d25176b0fe784ad0@488.js\";\nimport define3 from \"./ecf81050a24329e5@163.js\";\n\nfunction _title(md) {\n  return md(_templateObject || (_templateObject = _taggedTemplateLiteral([\"# Visualising the Fellegi Sunter model \"])));\n}\n\nfunction _2(md) {\n  return md(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"*A final version of this notebook can be viewed on my blog [here](https://www.robinlinacre.com/visualising_fellegi_sunter/).*\"])));\n}\n\nfunction _para_1(md, texd) {\n  return md(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"The [previous article](https://www.robinlinacre.com/maths_of_fellegi_sunter/) presented an implementation of the Fellegi Sunter model.  We showed that match probability could be represented by Equation 1 - which is reproduced below:\\n\", \"\\n\\n\"])), texd(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\noperatorname{Pr}(\\text{records match}|gamma_{1},gamma_{2},ldots,gamma_{K})  \\newline [10pt] = \\frac{lambda m_{1ell}m_{2ell}ldots m_{Kell}}{lambda m_{1ell}m_{2ell}ldots m_{Kell}+ (1-lambda)u_{1ell}u_{1ell} ldots u_{Kell}} \"], [\"\\n\\\\operatorname{Pr}(\\\\text{records match}|\\\\gamma_{1},\\\\gamma_{2},\\\\ldots,\\\\gamma_{K})  \\\\newline [10pt] = \\\\frac{\\\\lambda m_{1\\\\ell}m_{2\\\\ell}\\\\ldots m_{K\\\\ell}}{\\\\lambda m_{1\\\\ell}m_{2\\\\ell}\\\\ldots m_{K\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell}u_{1\\\\ell} \\\\ldots u_{K\\\\ell}} \"]))));\n}\n\nfunction _para_2(md) {\n  return md(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"This article presents a way to understand and visualise this formula.\"])));\n}\n\nfunction _para_3(md) {\n  return md(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"In our visualisation, we are going to take each piece of evidence into account in turn. This is possible due to our assumption of conditional independence of comparison columns given the match status.\\n\\nThe means Equation 1 is equivalent to a repeated application of Bayes' Theorem (see annex). See [here](https://www.youtube.com/watch?v=HZGCoVF3YvM) is more in depth video about Bayes Theorem.\\n\"])));\n}\n\nfunction _para_4(md) {\n  return md(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"## Example\\n\\nWe are going to compute match probability for a record comparison with the following comparison columns:\\n\\n- `fname` (first name)\\n- `sname` (surname)\\n- `dob` (date of birth)\\n- `town` \\n\\n\\nThe default parameter values are a bit unrealistic, but help make sure the diagrams are legible.\\n\"], [\"## Example\\n\\nWe are going to compute match probability for a record comparison with the following comparison columns:\\n\\n- \\\\`fname\\\\` (first name)\\n- \\\\`sname\\\\` (surname)\\n- \\\\`dob\\\\` (date of birth)\\n- \\\\`town\\\\` \\n\\n\\nThe default parameter values are a bit unrealistic, but help make sure the diagrams are legible.\\n\"])));\n}\n\nfunction _subhead_1(md) {\n  return md(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"## Step 1\"])));\n}\n\nfunction _para_5(md, m, nm, tex) {\n  return md(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"We begin by visualising the space of all pairwise record comparisons, splitting the overall comparison space into \", \" and \", \" using our prior, \", \"\"])), m(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"matches\"]))), nm(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"non-matches\"]))), tex(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"operatorname{Pr}(\\text{records match}) =  lambda\"], [\"\\\\operatorname{Pr}(\\\\text{records match}) =  \\\\lambda\"]))));\n}\n\nfunction _lam_view($0) {\n  return $0;\n}\n\nfunction _treemap_1(plot_treemap, splink_settings) {\n  return plot_treemap(splink_settings, 0, 300);\n}\n\nfunction _para_6(md, texd, color_match, color_non_match, splink_settings) {\n  return md(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"Using only this information, our estimate of match probability is just the prior:\\n\\n\", \"\\n\\n\"])), texd(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\\text{match probability} =  \\frac{lambda }{lambda + (1-lambda)}  \\newline [10pt] = \\frac{colorbox{\", \"}{\\text{yellow area}}}{colorbox{\", \"}{\\text{yellow area}} + colorbox{\", \"}{\\text{blue area}} }= \", \" \"], [\"\\\\text{match probability} =  \\\\frac{\\\\lambda }{\\\\lambda + (1-\\\\lambda)}  \\\\newline [10pt] = \\\\frac{\\\\colorbox{\", \"}{\\\\text{yellow area}}}{\\\\colorbox{\", \"}{\\\\text{yellow area}} + \\\\colorbox{\", \"}{\\\\text{blue area}} }= \", \" \"])), color_match.hex(), color_match.hex(), color_non_match.hex(), splink_settings[\"proportion_of_matches\"].toPrecision(4)));\n}\n\nfunction _subhead_2(md) {\n  return md(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"## Step 2 - First name\"])));\n}\n\nfunction _para_7(md) {\n  return md(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"We will now choose the parameters of the model for the first name field, and then take this information into account in the diagram.\"])));\n}\n\nfunction _fname_view($0) {\n  return $0;\n}\n\nfunction _para_8(md, choice_text, splink_settings, dict_as_md_table_row, get_row_no_gammas, get_m_u_text, get_row, m, nm) {\n  return md(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\" \", \"\\nAn example of the data would be:\\n\", \"\\n\\nAccording to the model parameters you've chosen:\\n\\n\\n- \", \"\\n- \", \"\\n\\n\\n\\nGiven this observation, we can subdivide the comparison space, and we know we must be in the \", \" or \", \" part of the following diagram:\\n\"])), choice_text(\"fname\", splink_settings), dict_as_md_table_row(get_row_no_gammas(1)), get_m_u_text(\"fname\", get_row(1), splink_settings, \"m\"), get_m_u_text(\"fname\", get_row(1), splink_settings, \"u\"), m(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"yellow\"]))), nm(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral([\"blue\"]))));\n}\n\nfunction _treemap_2(plot_treemap, splink_settings) {\n  return plot_treemap(splink_settings, 1, 300);\n}\n\nfunction _para_9(md, m, texd, color_match, color_non_match, tex, get_m_u_formula_numbers, get_row, splink_settings) {\n  return md(_templateObject20 || (_templateObject20 = _taggedTemplateLiteral([\" What's the probability we're in the \", \" area?  This must be:\\n\\n\", \"\\n\\nFrom this diagram we can see that the \", \" and the \\n\", \".\\n\\nSo:\\n\\n\", \"\\n\\nWhich, in numbers is:\\n\\n\", \"\\n\"])), m(_templateObject21 || (_templateObject21 = _taggedTemplateLiteral([\"yellow\"]))), texd(_templateObject22 || (_templateObject22 = _taggedTemplateLiteral([\"\\text{match probability} = \\frac{colorbox{\", \"}{\\text{yellow area}}}{colorbox{\", \"}{\\text{yellow area}} + colorbox{\", \"}{\\text{blue area}} } \"], [\"\\\\text{match probability} = \\\\frac{\\\\colorbox{\", \"}{\\\\text{yellow area}}}{\\\\colorbox{\", \"}{\\\\text{yellow area}} + \\\\colorbox{\", \"}{\\\\text{blue area}} } \"])), color_match.hex(), color_match.hex(), color_non_match.hex()), tex(_templateObject23 || (_templateObject23 = _taggedTemplateLiteral([\"colorbox{\", \"}{$\\text{yellow area} = lambda m_{1ell}$}\"], [\"\\\\colorbox{\", \"}{$\\\\text{yellow area} = \\\\lambda m_{1\\\\ell}$}\"])), color_match.hex()), tex(_templateObject24 || (_templateObject24 = _taggedTemplateLiteral([\"colorbox{\", \"}{$\\text{blue area} = (1-lambda) u_{1ell}$}\"], [\"\\\\colorbox{\", \"}{$\\\\text{blue area} = (1-\\\\lambda) u_{1\\\\ell}$}\"])), color_non_match.hex()), texd(_templateObject25 || (_templateObject25 = _taggedTemplateLiteral([\"\\text{match probability} =  \\frac{lambda m_{1ell}}{lambda m_{1ell}+ (1-lambda)u_{1ell}}\"], [\"\\\\text{match probability} =  \\\\frac{\\\\lambda m_{1\\\\ell}}{\\\\lambda m_{1\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell}}\"]))), tex(_templateObject26 || (_templateObject26 = _taggedTemplateLiteral([\"\", \"\"])), get_m_u_formula_numbers(get_row(2), splink_settings, 1)));\n}\n\nfunction _subhead_3(md) {\n  return md(_templateObject27 || (_templateObject27 = _taggedTemplateLiteral([\"## Step 3 - Surname\"])));\n}\n\nfunction _para_10(md) {\n  return md(_templateObject28 || (_templateObject28 = _taggedTemplateLiteral([\"Let's also choose parameters for `sname`, the surname field:\"], [\"Let's also choose parameters for \\\\`sname\\\\`, the surname field:\"])));\n}\n\nfunction _sname_view($0) {\n  return $0;\n}\n\nfunction _para_11(md, choice_text, splink_settings, dict_as_md_table_row, get_row_no_gammas, get_m_u_text, get_row, m, nm) {\n  return md(_templateObject29 || (_templateObject29 = _taggedTemplateLiteral([\"\", \"\\nAn example of the data would be:\\n\", \"\\n\\nAccording to the model parameters you've chosen:\\n\\n\\n- \", \"\\n- \", \"\\n\\n\\n\\nGiven this observation, we can subdivide the comparison space, and we know we must be in the \", \" or \", \" part of the following diagram:\"])), choice_text(\"sname\", splink_settings), dict_as_md_table_row(get_row_no_gammas(2)), get_m_u_text(\"sname\", get_row(2), splink_settings, \"m\"), get_m_u_text(\"sname\", get_row(2), splink_settings, \"u\"), m(_templateObject30 || (_templateObject30 = _taggedTemplateLiteral([\"yellow\"]))), nm(_templateObject31 || (_templateObject31 = _taggedTemplateLiteral([\"blue\"]))));\n}\n\nfunction _treemap_3(plot_treemap, splink_settings) {\n  return plot_treemap(splink_settings, 2, 300);\n}\n\nfunction _para_12(md, texd, color_match, color_non_match, get_m_u_formula_numbers, get_row, splink_settings) {\n  return md(_templateObject32 || (_templateObject32 = _taggedTemplateLiteral([\"We now have:\\n\\n\", \"\\n\\n\", \"\\n\\nWhich, in numbers is:\\n\\n\", \"\\n\"])), texd(_templateObject33 || (_templateObject33 = _taggedTemplateLiteral([\"\\text{match probability} = \\frac{colorbox{\", \"}{\\text{yellow area}}}{colorbox{\", \"}{\\text{yellow area}} + colorbox{\", \"}{\\text{blue area}} } \"], [\"\\\\text{match probability} = \\\\frac{\\\\colorbox{\", \"}{\\\\text{yellow area}}}{\\\\colorbox{\", \"}{\\\\text{yellow area}} + \\\\colorbox{\", \"}{\\\\text{blue area}} } \"])), color_match.hex(), color_match.hex(), color_non_match.hex()), texd(_templateObject34 || (_templateObject34 = _taggedTemplateLiteral([\"= \\frac{lambda m_{1ell}m_{2ell}}{lambda m_{1ell}m_{2ell}+ (1-lambda)u_{1ell}u_{2ell}}\"], [\"= \\\\frac{\\\\lambda m_{1\\\\ell}m_{2\\\\ell}}{\\\\lambda m_{1\\\\ell}m_{2\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell}u_{2\\\\ell}}\"]))), texd(_templateObject35 || (_templateObject35 = _taggedTemplateLiteral([\"\", \"\"])), get_m_u_formula_numbers(get_row(2), splink_settings, 2)));\n}\n\nfunction _subhead_4(md) {\n  return md(_templateObject36 || (_templateObject36 = _taggedTemplateLiteral([\"## Step 4 - Date of birth\"])));\n}\n\nfunction _dob_view($0) {\n  return $0;\n}\n\nfunction _para_13(md, choice_text, splink_settings, dict_as_md_table_row, get_row_no_gammas, get_m_u_text, get_row, m, nm) {\n  return md(_templateObject37 || (_templateObject37 = _taggedTemplateLiteral([\" \", \"\\nAn example of the data would be:\\n\", \"\\n\\nAccording to the model parameters you've chosen:\\n\\n\\n- \", \"\\n- \", \"\\n\\n\\n\\nGiven this observation, we can subdivide the comparison space, and we know we must be in the \", \" or \", \" part of the following diagram:\\n\"])), choice_text(\"dob\", splink_settings), dict_as_md_table_row(get_row_no_gammas(3)), get_m_u_text(\"dob\", get_row(3), splink_settings, \"m\"), get_m_u_text(\"dob\", get_row(3), splink_settings, \"u\"), m(_templateObject38 || (_templateObject38 = _taggedTemplateLiteral([\"yellow\"]))), nm(_templateObject39 || (_templateObject39 = _taggedTemplateLiteral([\"blue\"]))));\n}\n\nfunction _treemap_4(plot_treemap, splink_settings) {\n  return plot_treemap(splink_settings, 3, 300);\n}\n\nfunction _para_14(md, texd, get_m_u_formula_numbers, get_row, splink_settings) {\n  return md(_templateObject40 || (_templateObject40 = _taggedTemplateLiteral([\"We now have:\\n\\n\", \"\\n\\n\", \"\\n\"])), texd(_templateObject41 || (_templateObject41 = _taggedTemplateLiteral([\"\\text{match probability} =  \\frac{lambda m_{1ell}m_{2ell}m_{3ell}}{lambda m_{1ell}m_{2ell}m_{3ell}+ (1-lambda)u_{1ell}u_{2ell}u_{3ell}}\"], [\"\\\\text{match probability} =  \\\\frac{\\\\lambda m_{1\\\\ell}m_{2\\\\ell}m_{3\\\\ell}}{\\\\lambda m_{1\\\\ell}m_{2\\\\ell}m_{3\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell}u_{2\\\\ell}u_{3\\\\ell}}\"]))), texd(_templateObject42 || (_templateObject42 = _taggedTemplateLiteral([\"\", \"\"])), get_m_u_formula_numbers(get_row(3), splink_settings, 3)));\n}\n\nfunction _subhead_5(md) {\n  return md(_templateObject43 || (_templateObject43 = _taggedTemplateLiteral([\"## Step 5: Town\"])));\n}\n\nfunction _town_view($0) {\n  return $0;\n}\n\nfunction _para_15(md, choice_text, splink_settings, dict_as_md_table_row, get_row_no_gammas, get_m_u_text, get_row, m, nm) {\n  return md(_templateObject44 || (_templateObject44 = _taggedTemplateLiteral([\"The final column is town.\\n\\n\", \"\\nAn example of the final data would be:\\n\", \"\\n\\nAccording to the model parameters you've chosen:\\n\\n\\n- \", \"\\n- \", \"\\n\\n\\n\\nGiven this observation, we can subdivide the comparison space, and we know we must be in the \", \" or \", \" part of the following diagram:\\n\"])), choice_text(\"town\", splink_settings), dict_as_md_table_row(get_row_no_gammas(4)), get_m_u_text(\"town\", get_row(4), splink_settings, \"m\"), get_m_u_text(\"town\", get_row(4), splink_settings, \"u\"), m(_templateObject45 || (_templateObject45 = _taggedTemplateLiteral([\"yellow\"]))), nm(_templateObject46 || (_templateObject46 = _taggedTemplateLiteral([\"blue\"]))));\n}\n\nfunction _treemap_5(plot_treemap, splink_settings) {\n  return plot_treemap(splink_settings, 4, 300);\n}\n\nfunction _para_16(md, texd, tex, get_m_u_formula_numbers, get_row, splink_settings) {\n  return md(_templateObject47 || (_templateObject47 = _taggedTemplateLiteral([\"The final match probability is therefore:\\n\\n\", \"\\n\\nWhich, in numbers is:\\n\\n\\n\", \"\\n\"])), texd(_templateObject48 || (_templateObject48 = _taggedTemplateLiteral([\"\\text{match probability} =  \\frac{lambda m_{1ell}m_{2ell}m_{3ell}m_{4ell}}{lambda m_{1ell}m_{2ell}m_{3ell}m_{4ell}+ (1-lambda)u_{1ell}u_{2ell}u_{3ell}u_{4ell}}\"], [\"\\\\text{match probability} =  \\\\frac{\\\\lambda m_{1\\\\ell}m_{2\\\\ell}m_{3\\\\ell}m_{4\\\\ell}}{\\\\lambda m_{1\\\\ell}m_{2\\\\ell}m_{3\\\\ell}m_{4\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell}u_{2\\\\ell}u_{3\\\\ell}u_{4\\\\ell}}\"]))), tex(_templateObject49 || (_templateObject49 = _taggedTemplateLiteral([\"\", \"\"])), get_m_u_formula_numbers(get_row(4), splink_settings)));\n}\n\nfunction _annex(md, tex, texd) {\n  return md(_templateObject50 || (_templateObject50 = _taggedTemplateLiteral([\"## Annex:  Mathematical representation\\n\\nThis annex shows why it's possible to represent the calculation of match probability as a step-by-step computation.  \\n\\nIn particular, we will show that we can calculate match probability using a repeated application of Bayes Theorem.  In pseudocode, our algorithm will be:\\n\\n```\\nprior = lambda\\nfor col in compaison_columns:\\n  posterior = bayes(col, prior)\\n  prior = posterior\\n```\\n\\n\\nWhere the final value of the posterior is equal to \", \".\\n\\nTo demonstrate why this works, consider equation 1, for the case of two columns:\\n\\n\", \"\\n\\nWe start by applying Bayes Theorem once, accounting for the first comparison column:\\n\\n\", \"\\n\\nThis posterior, \", \", becomes the new prior, which we now use instead of lambda:\\n\", \"\\n\\nNote that:\\n\\n\", \"\\n\\nBut \", \" shows that  the term \", \" appears on both top and bottom of \", \" and therefore cancels, leaving \", \"  as desired.\\n\\n\"], [\"## Annex:  Mathematical representation\\n\\nThis annex shows why it's possible to represent the calculation of match probability as a step-by-step computation.  \\n\\nIn particular, we will show that we can calculate match probability using a repeated application of Bayes Theorem.  In pseudocode, our algorithm will be:\\n\\n\\\\`\\\\`\\\\`\\nprior = lambda\\nfor col in compaison_columns:\\n  posterior = bayes(col, prior)\\n  prior = posterior\\n\\\\`\\\\`\\\\`\\n\\n\\nWhere the final value of the posterior is equal to \", \".\\n\\nTo demonstrate why this works, consider equation 1, for the case of two columns:\\n\\n\", \"\\n\\nWe start by applying Bayes Theorem once, accounting for the first comparison column:\\n\\n\", \"\\n\\nThis posterior, \", \", becomes the new prior, which we now use instead of lambda:\\n\", \"\\n\\nNote that:\\n\\n\", \"\\n\\nBut \", \" shows that  the term \", \" appears on both top and bottom of \", \" and therefore cancels, leaving \", \"  as desired.\\n\\n\"])), tex(_templateObject51 || (_templateObject51 = _taggedTemplateLiteral([\"\\noperatorname{Pr}(\\text{records match}|gamma_{1},gamma_{2},ldots,gamma_{K})\"], [\"\\n\\\\operatorname{Pr}(\\\\text{records match}|\\\\gamma_{1},\\\\gamma_{2},\\\\ldots,\\\\gamma_{K})\"]))), texd(_templateObject52 || (_templateObject52 = _taggedTemplateLiteral([\"\\noperatorname{Pr}(\\text{records match}|gamma_{1},gamma_{2}) = \\frac{lambda m_{1ell}m_{2ell}}{lambda m_{1ell}m_{2ell}+ (1-lambda)u_{1ell}u_{1ell}} \\tag{2.1}\"], [\"\\n\\\\operatorname{Pr}(\\\\text{records match}|\\\\gamma_{1},\\\\gamma_{2}) = \\\\frac{\\\\lambda m_{1\\\\ell}m_{2\\\\ell}}{\\\\lambda m_{1\\\\ell}m_{2\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell}u_{1\\\\ell}} \\\\tag{2.1}\"]))), texd(_templateObject53 || (_templateObject53 = _taggedTemplateLiteral([\"\\noperatorname{Pr}(\\text{records match}|gamma_{1}) = t = \\frac{lambda m_{1ell}}{lambda m_{1ell}+ (1-lambda)u_{1ell}}\"], [\"\\n\\\\operatorname{Pr}(\\\\text{records match}|\\\\gamma_{1}) = t = \\\\frac{\\\\lambda m_{1\\\\ell}}{\\\\lambda m_{1\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell}}\"]))), tex(_templateObject54 || (_templateObject54 = _taggedTemplateLiteral([\"t\"]))), texd(_templateObject55 || (_templateObject55 = _taggedTemplateLiteral([\"\\n\\text{posterior} = operatorname{Pr}(\\text{records match}|gamma_{1},gamma_{2}) = \\frac{t m_{2ell}}{t m_{2ell}+ (1-t)u_{2ell}}\\tag{2.2}\"], [\"\\n\\\\text{posterior} = \\\\operatorname{Pr}(\\\\text{records match}|\\\\gamma_{1},\\\\gamma_{2}) = \\\\frac{t m_{2\\\\ell}}{t m_{2\\\\ell}+ (1-t)u_{2\\\\ell}}\\\\tag{2.2}\"]))), texd(_templateObject56 || (_templateObject56 = _taggedTemplateLiteral([\"\\n1- t = 1 - \\frac{lambda m_{1ell}}{lambda m_{1ell}+ (1-lambda)u_{1ell}} = \\frac{lambda m_{1ell}+ (1-lambda)u_{1ell} - lambda m_{1ell}}{lambda m_{1ell}+ (1-lambda)u_{1ell}} = \\frac{(1-lambda)u_{1ell} }{lambda m_{1ell}+ (1-lambda)u_{1ell}}\\tag{2.3}\"], [\"\\n1- t = 1 - \\\\frac{\\\\lambda m_{1\\\\ell}}{\\\\lambda m_{1\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell}} = \\\\frac{\\\\lambda m_{1\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell} - \\\\lambda m_{1\\\\ell}}{\\\\lambda m_{1\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell}} = \\\\frac{(1-\\\\lambda)u_{1\\\\ell} }{\\\\lambda m_{1\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell}}\\\\tag{2.3}\"]))), tex(_templateObject57 || (_templateObject57 = _taggedTemplateLiteral([\"(2.3)\"]))), tex(_templateObject58 || (_templateObject58 = _taggedTemplateLiteral([\"(lambda m_{1ell}+ (1-lambda)u_{1ell})\"], [\"(\\\\lambda m_{1\\\\ell}+ (1-\\\\lambda)u_{1\\\\ell})\"]))), tex(_templateObject59 || (_templateObject59 = _taggedTemplateLiteral([\"(2.2)\"]))), tex(_templateObject60 || (_templateObject60 = _taggedTemplateLiteral([\"(2.1)\"]))));\n}\n\nfunction _texd(tex) {\n  return tex.options({\n    displayMode: true,\n    fleqn: true\n  });\n}\n\nfunction _css_styles(html, color_match, color_non_match) {\n  return html(_templateObject61 || (_templateObject61 = _taggedTemplateLiteral([\"<style>\\n.katex-display>.katex { font-size: 1em}\\n\\n\\ntextarea {\\n    max-height: 1000em !important;\\n    font-family: monospace !important;\\n}\\n\\n.katex-display>.katex>.katex-html>.tag {right: unset; padding-left:4em}\\n\\n.hl_m {\\nbackground-color: \", \";\\ndisplay:inline-block;\\n}\\n\\n.hl_nm {\\nbackground-color: \", \";\\ndisplay:inline-block;\\n}\\n\\n</style>\"])), color_match.hex(), color_non_match.hex());\n}\n\nfunction _get_row(splink_settings) {\n  return function get_row(depth) {\n    var row = {};\n    var lookup = {\n      fname: [{\n        fname_l: \"John\",\n        fname_r: \"Tom\"\n      }, {\n        fname_l: \"John\",\n        fname_r: \"John\"\n      }],\n      sname: [{\n        sname_l: \"Smith\",\n        sname_r: \"Hanks\"\n      }, {\n        sname_l: \"Smith\",\n        sname_r: \"Smith\"\n      }],\n      dob: [{\n        dob_l: \"1989-03-02\",\n        dob_r: \"1981-08-21\"\n      }, {\n        dob_l: \"1989-03-02\",\n        dob_r: \"1989-03-02\"\n      }],\n      town: [{\n        town_l: \"Bristol\",\n        town_r: \"Peckham\"\n      }, {\n        town_l: \"Bristol\",\n        town_r: \"Bristol\"\n      }]\n    };\n    var ccs = splink_settings.comparison_columns.slice(0, depth);\n    ccs.forEach(function (cc) {\n      var values = lookup[cc.col_name][cc.gamma_value];\n      row = _objectSpread(_objectSpread({}, row), values);\n      var gamma_name = \"_\" + cc.col_name;\n      row[gamma_name] = cc.gamma_value;\n    });\n    return row;\n  };\n}\n\nfunction _get_row_no_gammas(get_row) {\n  return function get_row_no_gammas(depth) {\n    var row = get_row(depth);\n    var keys = Object.keys(row).filter(function (d) {\n      return !d.includes(\"_\");\n    });\n    var new_object = {};\n    keys.forEach(function (k) {\n      new_object[k] = row[k];\n    });\n    return new_object;\n  };\n}\n\nfunction _dict_as_md_table_row(md) {\n  return function dict_as_md_table_row(dict) {\n    var row1 = Object.keys(dict).join(\" | \");\n    var row2 = Object.keys(dict).map(function (d) {\n      return \"-\";\n    }).join(\" | \");\n    var row3 = Object.values(dict).join(\" | \");\n    return md(_templateObject62 || (_templateObject62 = _taggedTemplateLiteral([\"\", \" \\n \", \" \\n \", \" \\n\"], [\"\", \" \\\\n \", \" \\\\n \", \" \\\\n\"])), row1, row2, row3);\n  };\n}\n\nfunction _additional_styles(styles) {\n  return styles;\n}\n\nfunction _nm(html) {\n  return function nm(text) {\n    return html(_templateObject63 || (_templateObject63 = _taggedTemplateLiteral([\"<span class=\\\"hl_nm\\\">\", \"</span>\"])), text);\n  };\n}\n\nfunction _m(html) {\n  return function m(text) {\n    return html(_templateObject64 || (_templateObject64 = _taggedTemplateLiteral([\"<span class=\\\"hl_m\\\">\", \"</span>\"])), text);\n  };\n}\n\nfunction _styles2(form_styles) {\n  return form_styles;\n}\n\nfunction _get_m_u_text(m, nm, md) {\n  return function get_m_u_text(colname, row, settings, m_or_u) {\n    var cc = settings.comparison_columns.filter(function (cc) {\n      return cc.col_name == colname;\n    })[0];\n    var gamma_value = row[\"_\" + colname];\n    var matches_text;\n\n    if (gamma_value == 1) {\n      matches_text = \"matches\";\n    } else if (gamma_value == 0) {\n      matches_text = \"does not match\";\n    }\n\n    var col_name_escaped = colname.replace(\"_\", \"\\\\_\");\n    var gamma_tex = \"The column `\".concat(colname, \"` \").concat(matches_text);\n    var percentage = cc[\"\".concat(m_or_u, \"_probabilities\")][gamma_value] * 100;\n    percentage = parseFloat(percentage).toFixed(0) + \"%\";\n    var match_or_non_match;\n\n    if (m_or_u == \"m\") {\n      match_or_non_match = m(_templateObject65 || (_templateObject65 = _taggedTemplateLiteral([\"matching records\"])));\n    } else {\n      match_or_non_match = nm(_templateObject66 || (_templateObject66 = _taggedTemplateLiteral([\"non-matching records\"])));\n    }\n\n    return md(_templateObject67 || (_templateObject67 = _taggedTemplateLiteral([\"\", \" in \", \" of \", \"\"])), gamma_tex, percentage, match_or_non_match);\n  };\n}\n\nfunction _choice_text(md, tex) {\n  return function choice_text(col_name, splink_settings) {\n    var cc;\n    splink_settings.comparison_columns.forEach(function (d) {\n      if (d.col_name == col_name) {\n        cc = d;\n      }\n    });\n    var matches_text;\n    var gamma_value = cc[\"gamma_value\"];\n\n    if (gamma_value == 0) {\n      matches_text = \"does not match\";\n    } else {\n      matches_text = \"matches\";\n    }\n\n    return md(_templateObject68 || (_templateObject68 = _taggedTemplateLiteral([\"You have chosen that the column `\", \"` \", \", i.e. that \", \" = \", \".\"], [\"You have chosen that the column \\\\`\", \"\\\\` \", \", i.e. that \", \" = \", \".\"])), col_name, matches_text, tex(_templateObject69 || (_templateObject69 = _taggedTemplateLiteral([\"gamma_\\text{\", \"}\"], [\"\\\\gamma_\\\\text{\", \"}\"])), col_name), gamma_value);\n  };\n}\n\nfunction _inputs(require) {\n  return require(\"@observablehq/inputs\");\n}\n\nexport default function define(runtime, observer) {\n  var main = runtime.module();\n  main.variable(observer(\"title\")).define(\"title\", [\"md\"], _title);\n  main.variable(observer()).define([\"md\"], _2);\n  main.variable(observer(\"para_1\")).define(\"para_1\", [\"md\", \"texd\"], _para_1);\n  main.variable(observer(\"para_2\")).define(\"para_2\", [\"md\"], _para_2);\n  main.variable(observer(\"para_3\")).define(\"para_3\", [\"md\"], _para_3);\n  main.variable(observer(\"para_4\")).define(\"para_4\", [\"md\"], _para_4);\n  main.variable(observer(\"subhead_1\")).define(\"subhead_1\", [\"md\"], _subhead_1);\n  main.variable(observer(\"para_5\")).define(\"para_5\", [\"md\", \"m\", \"nm\", \"tex\"], _para_5);\n  main.variable(observer(\"lam_view\")).define(\"lam_view\", [\"viewof lam\"], _lam_view);\n  main.variable(observer(\"treemap_1\")).define(\"treemap_1\", [\"plot_treemap\", \"splink_settings\"], _treemap_1);\n  main.variable(observer(\"para_6\")).define(\"para_6\", [\"md\", \"texd\", \"color_match\", \"color_non_match\", \"splink_settings\"], _para_6);\n  main.variable(observer(\"subhead_2\")).define(\"subhead_2\", [\"md\"], _subhead_2);\n  main.variable(observer(\"para_7\")).define(\"para_7\", [\"md\"], _para_7);\n  main.variable(observer(\"fname_view\")).define(\"fname_view\", [\"viewof fname_val\"], _fname_view);\n  main.variable(observer(\"para_8\")).define(\"para_8\", [\"md\", \"choice_text\", \"splink_settings\", \"dict_as_md_table_row\", \"get_row_no_gammas\", \"get_m_u_text\", \"get_row\", \"m\", \"nm\"], _para_8);\n  main.variable(observer(\"treemap_2\")).define(\"treemap_2\", [\"plot_treemap\", \"splink_settings\"], _treemap_2);\n  main.variable(observer(\"para_9\")).define(\"para_9\", [\"md\", \"m\", \"texd\", \"color_match\", \"color_non_match\", \"tex\", \"get_m_u_formula_numbers\", \"get_row\", \"splink_settings\"], _para_9);\n  main.variable(observer(\"subhead_3\")).define(\"subhead_3\", [\"md\"], _subhead_3);\n  main.variable(observer(\"para_10\")).define(\"para_10\", [\"md\"], _para_10);\n  main.variable(observer(\"sname_view\")).define(\"sname_view\", [\"viewof sname_val\"], _sname_view);\n  main.variable(observer(\"para_11\")).define(\"para_11\", [\"md\", \"choice_text\", \"splink_settings\", \"dict_as_md_table_row\", \"get_row_no_gammas\", \"get_m_u_text\", \"get_row\", \"m\", \"nm\"], _para_11);\n  main.variable(observer(\"treemap_3\")).define(\"treemap_3\", [\"plot_treemap\", \"splink_settings\"], _treemap_3);\n  main.variable(observer(\"para_12\")).define(\"para_12\", [\"md\", \"texd\", \"color_match\", \"color_non_match\", \"get_m_u_formula_numbers\", \"get_row\", \"splink_settings\"], _para_12);\n  main.variable(observer(\"subhead_4\")).define(\"subhead_4\", [\"md\"], _subhead_4);\n  main.variable(observer(\"dob_view\")).define(\"dob_view\", [\"viewof dob_val\"], _dob_view);\n  main.variable(observer(\"para_13\")).define(\"para_13\", [\"md\", \"choice_text\", \"splink_settings\", \"dict_as_md_table_row\", \"get_row_no_gammas\", \"get_m_u_text\", \"get_row\", \"m\", \"nm\"], _para_13);\n  main.variable(observer(\"treemap_4\")).define(\"treemap_4\", [\"plot_treemap\", \"splink_settings\"], _treemap_4);\n  main.variable(observer(\"para_14\")).define(\"para_14\", [\"md\", \"texd\", \"get_m_u_formula_numbers\", \"get_row\", \"splink_settings\"], _para_14);\n  main.variable(observer(\"subhead_5\")).define(\"subhead_5\", [\"md\"], _subhead_5);\n  main.variable(observer(\"town_view\")).define(\"town_view\", [\"viewof town_val\"], _town_view);\n  main.variable(observer(\"para_15\")).define(\"para_15\", [\"md\", \"choice_text\", \"splink_settings\", \"dict_as_md_table_row\", \"get_row_no_gammas\", \"get_m_u_text\", \"get_row\", \"m\", \"nm\"], _para_15);\n  main.variable(observer(\"treemap_5\")).define(\"treemap_5\", [\"plot_treemap\", \"splink_settings\"], _treemap_5);\n  main.variable(observer(\"para_16\")).define(\"para_16\", [\"md\", \"texd\", \"tex\", \"get_m_u_formula_numbers\", \"get_row\", \"splink_settings\"], _para_16);\n  main.variable(observer(\"annex\")).define(\"annex\", [\"md\", \"tex\", \"texd\"], _annex);\n  main.variable(observer(\"texd\")).define(\"texd\", [\"tex\"], _texd);\n  main.variable(observer(\"css_styles\")).define(\"css_styles\", [\"html\", \"color_match\", \"color_non_match\"], _css_styles);\n  var child1 = runtime.module(define1);\n  main.import(\"default_settings\", child1);\n  main.variable(observer(\"get_row\")).define(\"get_row\", [\"splink_settings\"], _get_row);\n  main.variable(observer(\"get_row_no_gammas\")).define(\"get_row_no_gammas\", [\"get_row\"], _get_row_no_gammas);\n  var child2 = runtime.module(define2);\n  main.import(\"get_m_u_formula_symbols\", child2);\n  main.import(\"get_m_u_formula_numbers\", child2);\n  main.import(\"get_comparison_vector_symbols_and_numbers\", child2);\n  main.import(\"get_match_probability_components\", child2);\n  main.variable(observer(\"dict_as_md_table_row\")).define(\"dict_as_md_table_row\", [\"md\"], _dict_as_md_table_row);\n  var child3 = runtime.module(define1);\n  main.import(\"styles\", child3);\n  main.import(\"plot_treemap\", child3);\n  main.import(\"color_match\", child3);\n  main.import(\"color_non_match\", child3);\n  main.variable(observer(\"additional_styles\")).define(\"additional_styles\", [\"styles\"], _additional_styles);\n  main.variable(observer(\"nm\")).define(\"nm\", [\"html\"], _nm);\n  main.variable(observer(\"m\")).define(\"m\", [\"html\"], _m);\n  var child4 = runtime.module(define3);\n  main.import(\"splink_settings\", child4);\n  main.import(\"viewof lam\", child4);\n  main.import(\"lam\", child4);\n  main.import(\"viewof fname_val\", child4);\n  main.import(\"fname_val\", child4);\n  main.import(\"viewof sname_val\", child4);\n  main.import(\"sname_val\", child4);\n  main.import(\"viewof dob_val\", child4);\n  main.import(\"dob_val\", child4);\n  main.import(\"viewof town_val\", child4);\n  main.import(\"town_val\", child4);\n  main.import(\"form_styles\", child4);\n  main.variable(observer(\"styles2\")).define(\"styles2\", [\"form_styles\"], _styles2);\n  main.variable(observer(\"get_m_u_text\")).define(\"get_m_u_text\", [\"m\", \"nm\", \"md\"], _get_m_u_text);\n  main.variable(observer(\"choice_text\")).define(\"choice_text\", [\"md\", \"tex\"], _choice_text);\n  main.variable(observer(\"inputs\")).define(\"inputs\", [\"require\"], _inputs);\n  return main;\n}","import React from 'react'\nimport define from \"@robinl/visualising-fellegi-sunter\"\n\nimport ProbLinkagePage from \"../components/prob_linkage_page\"\nimport { css } from \"@emotion/core\"\n\nexport const frontmatter = {\n    title: \"Visualising the Fellegi Sunter model\",\n    post_date: \"2021-05-07\",\n    code_url: \"https://observablehq.com/@robinl/visualising-fellegi-sunter\",\n    post_type: \"obs\",\n    post_category: \"probabilistic_linkage\",\n    description: \"An set of interactive, explorable explanations of the Fellegi Sunter model of probabilistic record linkage.  This article presents a way of visualising how the model works.\"\n}\n\nlet output_order = [\n    \"additional_styles\",\n    \"title\",\n    \"para_1\",\n    \"para_2\",\n    \"para_3\",\n    \"para_4\",\n    \"subhead_1\",\n    \"para_5\",\n    \"lam_view\",\n    \"treemap_1\",\n    \"para_6\",\n    \"subhead_2\",\n    \"para_7\",\n    \"fname_view\",\n    \"para_8\",\n    \"treemap_2\",\n    \"para_9\",\n    \"subhead_3\",\n    \"para_10\",\n    \"sname_view\",\n    \"para_11\",\n    \"treemap_3\",\n    \"para_12\",\n\n    \"subhead_4\",\n    \"dob_view\",\n    \"para_13\",\n    \"treemap_4\",\n    \"para_14\",\n\n    \"subhead_5\",\n    \"town_view\",\n    \"para_15\",\n    \"treemap_5\",\n    \"para_16\",\n    \"annex\",\n\n\n    \"additional_styles\",\n    \"styles2\",\n    \"css_styles\"\n\n\n]\n\nconst css_override = css`\nmargin-left: auto;\nmargin-right: auto;\nwidth: 90%;\nmax-width: 800px;\ntable {font-size: 0.8rem;\n line-height: 1rem;}\n div {position: relative}\n .wrap-info {\n     font-size: 0.7rem;\n }\nrem;\n`\n\n\n\n\n\nexport default (props) => {\n\n    return (<ProbLinkagePage\n        define={define}\n        output_order={output_order}\n        post_frontmatter={frontmatter}\n        css={css_override}\n        current_path={props.path}\n    />)\n\n\n}\n"],"sourceRoot":""}