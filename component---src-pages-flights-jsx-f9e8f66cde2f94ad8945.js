(self.webpackChunkgatsby_starter_hello_world=self.webpackChunkgatsby_starter_hello_world||[]).push([[157],{2465:function(e,t,r){"use strict";function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}r.d(t,{Z:function(){return n}})},2263:function(e,t,r){"use strict";r(7294);var n=r(835),o=r(8847),a=r(7414),i=r(6140),u=r(674);t.Z=function(e){var t;return t=e.define?(0,u.tZ)(o.Z,{define:e.define,output_order:e.output_order}):e.children,(0,u.tZ)(n.Z,{css:e.className},(0,u.tZ)(i.Z,{title:e.post_frontmatter.title,description:e.post_frontmatter.description}),(0,u.tZ)(a.Z,{post_frontmatter:e.post_frontmatter}),t)}},6260:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W},frontmatter:function(){return E}});r(7294);var n,o,a,i=r(2465);function u(e,t,r){return e(n||(n=(0,i.Z)(["# "," years of flights"])),t(r[1],r[0]))}function f(e){return e(o||(o=(0,i.Z)(["A final version of this notebook can be viewed on my blog [here](https://www.robinlinacre.com/flights/)."])))}function l(e,t,r,n,o,u,f,l,s,d){return e(a||(a=(0,i.Z)(["Between "," and "," I took "," flights with and average distance of "," miles, and total milage of ",".  Total energy usage was around "," kwh or "," tonnes of co2.\n\nYou can drag the globe below to rotate."])),t(r[0]),t(r[1]),n.length,o(u),o(f),l(s.flying.flying_miles_to_kwh(f)),l(d))}function s(e,t,r,n,o,a,i,u,f,l,s){var d=e.context2d(t,r),c=n.geoPath(o,d);function _(){d.clearRect(0,0,t,r),d.beginPath(),c(a),d.fillStyle="#fff",d.fill(),d.beginPath(),c(i),d.fillStyle="#000",d.fill(),d.beginPath(),c(a),d.stroke(),u.forEach((function(e){var t=[[e.lng_from,e.lat_from],[e.lng_to,e.lat_to]],r=f(t),n=[r.after[1][0]+e.random,r.after[1][1]+e.random];r.after[1]=n;var o={type:"LineString",coordinates:r.after};d.lineWidth=1,d.lineO,d.beginPath(),c(o),d.strokeStyle=l(e.date),d.stroke()})),d.lineWidth=1,d.strokeStyle="#000000"}return n.select(d.canvas).call(s(o).on("drag.render",_)).call(_).node()}function d(e,t,r,n){return e.geoOrthographic().fitExtent([[1,1],[t-1,r-1]],n).translate([t/2,r/2]).rotate([0,-51]).precision(.1)}function c(e,t,r){return e(t.flying.flying_miles_to_kwh(r))/1e3}function _(e){return function(t){return t*e.convert.per("kg_co2_jet_fuel/kwh")}}function h(e,t){return e.sum(t,(function(e){return e.distance}))}function b(e,t){return e.mean(t,(function(e){return e.distance}))}function m(e){return e("@robinl/energy_usage@0.0.34")}function v(e,t){return e.extent(t,(function(e){return e.date}))}function g(e){return e.format(",.0f")}function p(e){return e.format(",.2r")}function w(){return function(e,t){var r=(e.getTime()-t.getTime())/1e3;return r/=86400,Math.abs(Math.round(r/365.25))}}function y(){return function(e){return e.toISOString().split("T")[0]}}function k(e,t){return e.scaleSequential(e.interpolateOrRd).domain(e.extent(t,(function(e){return e.date})))}function j(e,t){return function(r){for(var n=0,o=r.length,a=[],i=[];++n<o;){var u=r[n-1].slice(),f=r[n].slice(),l=e(u),s=e(f),d=s[0]-l[0],c=s[1]-l[1],_=d*d+c*c;if(a.push(u),i.push(u),_>.4){var h=t.geoInterpolate(u,f)(.5),b=e(h),m=b[0]-l[0],v=b[1]-l[1],g=c*m-d*v;if(g*g/_>.1){var p=(m*d+v*c)/_;a.push(e.invert(h.resampled=[l[0]+p*d,l[1]+p*c])),i.push(h)}}}return o&&(a.push(f),i.push(f)),{before:a,after:i}}}function Z(e,t){return function(r){var n,o,a;return t.drag().on("start",(function(){n=e.cartesian(r.invert(t.mouse(this))),o=e(a=r.rotate())})).on("drag",(function(){var i=e.cartesian(r.rotate(a).invert(t.mouse(this))),u=e.multiply(o,e.delta(n,i));r.rotate(e.rotation(u))}))}}function S(e){return e}function O(){return{type:"Sphere"}}function q(e,t){return e.feature(t,t.objects.land)}function P(e){return e.json("https://unpkg.com/world-atlas@1/world/110m.json")}function M(e){return e("versor@0.0.3")}function T(e){return e("topojson-client@3")}function x(e){return e("d3@5")}function I(e){return e.csv("https://gist.githubusercontent.com/RobinL/ba3acbf42349115ed266a98643eb5a80/raw/a603b1fec071383d6a3eb27cbcda789c54cb0014/my_flights.csv",e.autoType)}function R(e){return e.map((function(e){return e.random=(Math.random()-.5)*e.distance/1e3,e}))}function z(e,t){var r=e.module();return r.variable(t("title")).define("title",["md","diff_years","start_end_date"],u),r.variable(t()).define(["md"],f),r.variable(t("blurb")).define("blurb",["md","format_date","start_end_date","routes","fmt_num","average_miles","total_miles","fmt_num_round","eu","tonnes_co2"],l),r.variable(t("chart")).define("chart",["DOM","width","height","d3","projection","sphere","land","routes","resample","colour_scale","drag"],s),r.variable(t("projection")).define("projection",["d3","width","height","sphere"],d),r.variable(t("tonnes_co2")).define("tonnes_co2",["kwh_to_kg_co2","eu","total_miles"],c),r.variable(t("kwh_to_kg_co2")).define("kwh_to_kg_co2",["eu"],_),r.variable(t("total_miles")).define("total_miles",["d3","routes"],h),r.variable(t("average_miles")).define("average_miles",["d3","routes"],b),r.variable(t("eu")).define("eu",["require"],m),r.variable(t("start_end_date")).define("start_end_date",["d3","routes"],v),r.variable(t("fmt_num")).define("fmt_num",["d3"],g),r.variable(t("fmt_num_round")).define("fmt_num_round",["d3"],p),r.variable(t("diff_years")).define("diff_years",w),r.variable(t("format_date")).define("format_date",y),r.variable(t("colour_scale")).define("colour_scale",["d3","routes"],k),r.variable(t("resample")).define("resample",["projection","d3"],j),r.variable(t("drag")).define("drag",["versor","d3"],Z),r.variable(t("height")).define("height",["width"],S),r.variable(t("sphere")).define("sphere",O),r.variable(t("land")).define("land",["topojson","world"],q),r.variable(t("world")).define("world",["d3"],P),r.variable(t("versor")).define("versor",["require"],M),r.variable(t("topojson")).define("topojson",["require"],T),r.variable(t("d3")).define("d3",["require"],x),r.variable(t("routes_raw")).define("routes_raw",["d3"],I),r.variable(t("routes")).define("routes",["routes_raw"],R),r}var A=r(2263),C=r(674),E={title:"My flights",post_date:"2019-10-05",code_url:"https://observablehq.com/@robinl/my-flights/",post_type:"obs",post_category:"energy",description:"A history of my flights"},L=["title","blurb","chart"],W=function(e){e.data;return(0,C.tZ)(A.Z,{define:z,output_order:L,post_frontmatter:E})}}}]);
//# sourceMappingURL=component---src-pages-flights-jsx-f9e8f66cde2f94ad8945.js.map